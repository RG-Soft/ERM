<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns="http://v8.1c.ru/8.3/xcf/logform" xmlns:app="http://v8.1c.ru/8.2/managed-application/core" xmlns:cfg="http://v8.1c.ru/8.1/data/enterprise/current-config" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:ent="http://v8.1c.ru/8.1/data/enterprise" xmlns:lf="http://v8.1c.ru/8.2/managed-application/logform" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xr="http://v8.1c.ru/8.3/xcf/readable" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5">
	<AutoCommandBar name="ФормаКоманднаяПанель" id="-1">
		<Autofill>false</Autofill>
	</AutoCommandBar>
	<Events>
		<Event name="OnCreateAtServer">ПриСозданииНаСервере</Event>
	</Events>
	<ChildItems>
		<UsualGroup name="ГруппаОтборы" id="56">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа отборы</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа отборы</v8:content>
				</v8:item>
			</ToolTip>
			<Group>Horizontal</Group>
			<Representation>None</Representation>
			<ShowTitle>false</ShowTitle>
			<ExtendedTooltip name="ГруппаОтборыРасширеннаяПодсказка" id="57"/>
			<ChildItems>
				<InputField name="Period" id="245">
					<DataPath>Period</DataPath>
					<ContextMenu name="PeriodКонтекстноеМеню" id="246"/>
					<ExtendedTooltip name="PeriodРасширеннаяПодсказка" id="247"/>
					<Events>
						<Event name="OnChange">PeriodПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="Source" id="58">
					<DataPath>Source</DataPath>
					<ContextMenu name="SourceКонтекстноеМеню" id="59"/>
					<ExtendedTooltip name="SourceРасширеннаяПодсказка" id="60"/>
					<Events>
						<Event name="OnChange">SourceПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="GeoMarket" id="64">
					<DataPath>GeoMarket</DataPath>
					<ContextMenu name="GeoMarketКонтекстноеМеню" id="65"/>
					<ExtendedTooltip name="GeoMarketРасширеннаяПодсказка" id="66"/>
					<Events>
						<Event name="OnChange">GeoMarketПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="SubGeoMarket" id="251">
					<DataPath>SubGeoMarket</DataPath>
					<ContextMenu name="SubGeoMarketКонтекстноеМеню" id="252"/>
					<ExtendedTooltip name="SubGeoMarketРасширеннаяПодсказка" id="253"/>
					<Events>
						<Event name="OnChange">SubGeoMarketПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="Segment" id="242">
					<DataPath>Segment</DataPath>
					<ContextMenu name="SegmentКонтекстноеМеню" id="243"/>
					<ExtendedTooltip name="SegmentРасширеннаяПодсказка" id="244"/>
					<Events>
						<Event name="OnChange">SegmentПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="Client" id="61">
					<DataPath>Client</DataPath>
					<ContextMenu name="ClientКонтекстноеМеню" id="62"/>
					<ExtendedTooltip name="ClientРасширеннаяПодсказка" id="63"/>
					<Events>
						<Event name="OnChange">ClientПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="Company" id="67">
					<DataPath>Company</DataPath>
					<ChoiceParameterLinks>
						<xr:Link>
							<xr:Name>Отбор.Source</xr:Name>
							<xr:DataPath xsi:type="xs:string">Source</xr:DataPath>
							<xr:ValueChange>Clear</xr:ValueChange>
						</xr:Link>
					</ChoiceParameterLinks>
					<ContextMenu name="CompanyКонтекстноеМеню" id="68"/>
					<ExtendedTooltip name="CompanyРасширеннаяПодсказка" id="69"/>
					<Events>
						<Event name="OnChange">CompanyПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="Account" id="81">
					<DataPath>Account</DataPath>
					<ContextMenu name="AccountКонтекстноеМеню" id="82"/>
					<ExtendedTooltip name="AccountРасширеннаяПодсказка" id="83"/>
					<Events>
						<Event name="OnChange">AccountПриИзменении</Event>
					</Events>
				</InputField>
				<InputField name="Status" id="248">
					<DataPath>Status</DataPath>
					<ContextMenu name="StatusКонтекстноеМеню" id="249"/>
					<ExtendedTooltip name="StatusРасширеннаяПодсказка" id="250"/>
					<Events>
						<Event name="OnChange">BilledПриИзменении</Event>
					</Events>
				</InputField>
				<CheckBoxField name="Comment" id="87">
					<DataPath>NoComments</DataPath>
					<TitleLocation>Top</TitleLocation>
					<CheckBoxType>Auto</CheckBoxType>
					<ContextMenu name="CommentКонтекстноеМеню" id="88"/>
					<ExtendedTooltip name="CommentРасширеннаяПодсказка" id="89"/>
					<Events>
						<Event name="OnChange">CommentПриИзменении</Event>
					</Events>
				</CheckBoxField>
				<CheckBoxField name="OnlyMyItems" id="257">
					<DataPath>OnlyMyItems</DataPath>
					<TitleLocation>Top</TitleLocation>
					<CheckBoxType>Auto</CheckBoxType>
					<ContextMenu name="OnlyMyItemsКонтекстноеМеню" id="258"/>
					<ExtendedTooltip name="OnlyMyItemsРасширеннаяПодсказка" id="259"/>
					<Events>
						<Event name="OnChange">OnlyMyItemsПриИзменении</Event>
					</Events>
				</CheckBoxField>
			</ChildItems>
		</UsualGroup>
		<Table name="SalesOrders" id="90">
			<UseAlternationRowColor>true</UseAlternationRowColor>
			<EnableStartDrag>true</EnableStartDrag>
			<DataPath>SalesOrders</DataPath>
			<RowPictureDataPath>SalesOrders.DefaultPicture</RowPictureDataPath>
			<AutoRefresh>false</AutoRefresh>
			<AutoRefreshPeriod>60</AutoRefreshPeriod>
			<Period>
				<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
				<v8:startDate>0001-01-01T00:00:00</v8:startDate>
				<v8:endDate>0001-01-01T00:00:00</v8:endDate>
			</Period>
			<ChoiceFoldersAndItems>Items</ChoiceFoldersAndItems>
			<RestoreCurrentRow>false</RestoreCurrentRow>
			<TopLevelParent xsi:nil="true"/>
			<ShowRoot>true</ShowRoot>
			<AllowRootChoice>false</AllowRootChoice>
			<UpdateOnDataChange>Auto</UpdateOnDataChange>
			<ContextMenu name="SalesOrdersКонтекстноеМеню" id="91"/>
			<AutoCommandBar name="SalesOrdersКоманднаяПанель" id="92">
				<ChildItems>
					<Button name="SalesOrdersУстановитьФлажки" id="145">
						<Type>CommandBarButton</Type>
						<CommandName>Form.Command.УстановитьФлажки</CommandName>
						<ExtendedTooltip name="SalesOrdersУстановитьФлажкиРасширеннаяПодсказка" id="146"/>
					</Button>
					<Button name="SalesOrdersСнятьФлажки" id="147">
						<Type>CommandBarButton</Type>
						<CommandName>Form.Command.СнятьФлажки</CommandName>
						<ExtendedTooltip name="SalesOrdersСнятьФлажкиРасширеннаяПодсказка" id="148"/>
					</Button>
					<Button name="SalesOrdersОбновить" id="200">
						<Type>CommandBarButton</Type>
						<Representation>PictureAndText</Representation>
						<OnlyInAllActions>true</OnlyInAllActions>
						<CommandName>Form.Item.SalesOrders.StandardCommand.Refresh</CommandName>
						<ExtendedTooltip name="SalesOrdersОбновитьРасширеннаяПодсказка" id="201"/>
					</Button>
					<Button name="SalesOrdersAddStatus" id="149">
						<Type>CommandBarButton</Type>
						<Representation>PictureAndText</Representation>
						<CommandName>Form.Command.AddStatus</CommandName>
						<Picture>
							<xr:Ref>CommonPicture.ПриложитьФайл</xr:Ref>
							<xr:LoadTransparent>true</xr:LoadTransparent>
						</Picture>
						<ExtendedTooltip name="SalesOrdersAddStatusРасширеннаяПодсказка" id="150"/>
					</Button>
				</ChildItems>
			</AutoCommandBar>
			<ExtendedTooltip name="SalesOrdersРасширеннаяПодсказка" id="93"/>
			<SearchStringAddition name="SalesOrdersСтрокаПоиска" id="94">
				<AdditionSource>
					<Item>SalesOrders</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="SalesOrdersСтрокаПоискаКонтекстноеМеню" id="95"/>
				<ExtendedTooltip name="SalesOrdersСтрокаПоискаРасширеннаяПодсказка" id="96"/>
			</SearchStringAddition>
			<ViewStatusAddition name="SalesOrdersСостояниеПросмотра" id="97">
				<AdditionSource>
					<Item>SalesOrders</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="SalesOrdersСостояниеПросмотраКонтекстноеМеню" id="98"/>
				<ExtendedTooltip name="SalesOrdersСостояниеПросмотраРасширеннаяПодсказка" id="99"/>
			</ViewStatusAddition>
			<SearchControlAddition name="SalesOrdersУправлениеПоиском" id="100">
				<AdditionSource>
					<Item>SalesOrders</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="SalesOrdersУправлениеПоискомКонтекстноеМеню" id="101"/>
				<ExtendedTooltip name="SalesOrdersУправлениеПоискомРасширеннаяПодсказка" id="102"/>
			</SearchControlAddition>
			<Events>
				<Event name="Selection">SalesOrdersВыбор</Event>
				<Event name="OnActivateCell">SalesOrdersПриАктивизацииЯчейки</Event>
			</Events>
			<ChildItems>
				<LabelField name="SalesOrdersSource" id="136">
					<DataPath>SalesOrders.Source</DataPath>
					<ContextMenu name="SalesOrdersSourceКонтекстноеМеню" id="137"/>
					<ExtendedTooltip name="SalesOrdersSourceРасширеннаяПодсказка" id="138"/>
				</LabelField>
				<LabelField name="SalesOrdersGeoMarket" id="118">
					<DataPath>SalesOrders.GeoMarket</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Geo Market</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersGeoMarketКонтекстноеМеню" id="119"/>
					<ExtendedTooltip name="SalesOrdersGeoMarketРасширеннаяПодсказка" id="120"/>
				</LabelField>
				<LabelField name="SalesOrdersSubGeoMarket" id="208">
					<DataPath>SalesOrders.SubGeoMarket</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Sub Geo Market</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersSubGeoMarketКонтекстноеМеню" id="209"/>
					<ExtendedTooltip name="SalesOrdersSubGeoMarketРасширеннаяПодсказка" id="210"/>
				</LabelField>
				<LabelField name="SalesOrdersSegment" id="211">
					<DataPath>SalesOrders.Segment</DataPath>
					<ContextMenu name="SalesOrdersSegmentКонтекстноеМеню" id="212"/>
					<ExtendedTooltip name="SalesOrdersSegmentРасширеннаяПодсказка" id="213"/>
				</LabelField>
				<LabelField name="SalesOrdersCompany" id="254">
					<DataPath>SalesOrders.Company.Code</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Company</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersCompanyКонтекстноеМеню" id="255"/>
					<ExtendedTooltip name="SalesOrdersCompanyРасширеннаяПодсказка" id="256"/>
				</LabelField>
				<LabelField name="SalesOrdersCustomerID" id="223">
					<DataPath>SalesOrders.CustomerID</DataPath>
					<ContextMenu name="SalesOrdersCustomerIDКонтекстноеМеню" id="224"/>
					<ExtendedTooltip name="SalesOrdersCustomerIDРасширеннаяПодсказка" id="225"/>
				</LabelField>
				<LabelField name="SalesOrdersCustomer" id="220">
					<DataPath>SalesOrders.Customer</DataPath>
					<ContextMenu name="SalesOrdersCustomerКонтекстноеМеню" id="221"/>
					<ExtendedTooltip name="SalesOrdersCustomerРасширеннаяПодсказка" id="222"/>
				</LabelField>
				<LabelField name="SalesOrdersAccount" id="202">
					<DataPath>SalesOrders.Account</DataPath>
					<ContextMenu name="SalesOrdersAccountКонтекстноеМеню" id="203"/>
					<ExtendedTooltip name="SalesOrdersAccountРасширеннаяПодсказка" id="204"/>
				</LabelField>
				<LabelField name="SalesOrdersAU" id="205">
					<DataPath>SalesOrders.AU</DataPath>
					<ContextMenu name="SalesOrdersAUКонтекстноеМеню" id="206"/>
					<ExtendedTooltip name="SalesOrdersAUРасширеннаяПодсказка" id="207"/>
				</LabelField>
				<LabelField name="SalesOrdersSalesNo" id="133">
					<DataPath>SalesOrders.SalesNo</DataPath>
					<DefaultItem>true</DefaultItem>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Transaction Number</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersSalesNoКонтекстноеМеню" id="134"/>
					<ExtendedTooltip name="SalesOrdersSalesNoРасширеннаяПодсказка" id="135"/>
				</LabelField>
				<LabelField name="SalesOrdersSalesDate" id="130">
					<DataPath>SalesOrders.SalesDate</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Transaction Date</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersSalesDateКонтекстноеМеню" id="131"/>
					<ExtendedTooltip name="SalesOrdersSalesDateРасширеннаяПодсказка" id="132"/>
				</LabelField>
				<LabelField name="SalesOrdersCurrency" id="115">
					<DataPath>SalesOrders.Currency</DataPath>
					<ContextMenu name="SalesOrdersCurrencyКонтекстноеМеню" id="116"/>
					<ExtendedTooltip name="SalesOrdersCurrencyРасширеннаяПодсказка" id="117"/>
				</LabelField>
				<ColumnGroup name="SalesOrdersГруппа2" id="240">
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Remaining Amount</v8:content>
						</v8:item>
					</Title>
					<Group>Horizontal</Group>
					<ShowInHeader>true</ShowInHeader>
					<ExtendedTooltip name="SalesOrdersГруппа2РасширеннаяПодсказка" id="241"/>
					<ChildItems>
						<LabelField name="SalesOrdersRemainingAmountOrigCurr" id="234">
							<DataPath>SalesOrders.RemainingAmount</DataPath>
							<Title>
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>Orig. curr</v8:content>
								</v8:item>
							</Title>
							<ContextMenu name="SalesOrdersRemainingAmountOrigCurrКонтекстноеМеню" id="235"/>
							<ExtendedTooltip name="SalesOrdersRemainingAmountOrigCurrРасширеннаяПодсказка" id="236"/>
						</LabelField>
						<LabelField name="SalesOrdersRemainingAmountUSD" id="237">
							<DataPath>SalesOrders.RemainingAmountUSD</DataPath>
							<Title>
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>USD</v8:content>
								</v8:item>
							</Title>
							<ContextMenu name="SalesOrdersRemainingAmountUSDКонтекстноеМеню" id="238"/>
							<ExtendedTooltip name="SalesOrdersRemainingAmountUSDРасширеннаяПодсказка" id="239"/>
						</LabelField>
					</ChildItems>
				</ColumnGroup>
				<LabelField name="SalesOrdersAgreement" id="214">
					<DataPath>SalesOrders.Agreement</DataPath>
					<ContextMenu name="SalesOrdersAgreementКонтекстноеМеню" id="215"/>
					<ExtendedTooltip name="SalesOrdersAgreementРасширеннаяПодсказка" id="216"/>
				</LabelField>
				<LabelField name="SalesOrdersLocation" id="121">
					<DataPath>SalesOrders.Location</DataPath>
					<ContextMenu name="SalesOrdersLocationКонтекстноеМеню" id="122"/>
					<ExtendedTooltip name="SalesOrdersLocationРасширеннаяПодсказка" id="123"/>
				</LabelField>
				<LabelField name="SalesOrdersReason" id="153">
					<DataPath>SalesOrders.Reason</DataPath>
					<ContextMenu name="SalesOrdersReasonКонтекстноеМеню" id="154"/>
					<ExtendedTooltip name="SalesOrdersReasonРасширеннаяПодсказка" id="155"/>
				</LabelField>
				<InputField name="SalesOrdersBilled" id="156">
					<DataPath>SalesOrders.Status</DataPath>
					<ContextMenu name="SalesOrdersBilledКонтекстноеМеню" id="157"/>
					<ExtendedTooltip name="SalesOrdersBilledРасширеннаяПодсказка" id="158"/>
				</InputField>
				<LabelField name="SalesOrdersExpectedDateForInvoice" id="159">
					<DataPath>SalesOrders.ExpectedDateForInvoice</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Expected date for Invoice </v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersExpectedDateForInvoiceКонтекстноеМеню" id="160"/>
					<ExtendedTooltip name="SalesOrdersExpectedDateForInvoiceРасширеннаяПодсказка" id="161"/>
				</LabelField>
				<LabelField name="SalesOrdersEscalateTo" id="162">
					<DataPath>SalesOrders.EscalateTo</DataPath>
					<ContextMenu name="SalesOrdersEscalateToКонтекстноеМеню" id="163"/>
					<ExtendedTooltip name="SalesOrdersEscalateToРасширеннаяПодсказка" id="164"/>
				</LabelField>
				<LabelField name="SalesOrdersDetails" id="168">
					<DataPath>SalesOrders.Details</DataPath>
					<ContextMenu name="SalesOrdersDetailsКонтекстноеМеню" id="169"/>
					<ExtendedTooltip name="SalesOrdersDetailsРасширеннаяПодсказка" id="170"/>
				</LabelField>
				<LabelField name="SalesOrdersResponsibleAR" id="217">
					<DataPath>SalesOrders.ResponsibleAR</DataPath>
					<ContextMenu name="SalesOrdersResponsibleARКонтекстноеМеню" id="218"/>
					<ExtendedTooltip name="SalesOrdersResponsibleARРасширеннаяПодсказка" id="219"/>
				</LabelField>
				<LabelField name="SalesOrdersJobEndDate" id="185">
					<DataPath>SalesOrders.JobEndDate</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Job End Date</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersJobEndDateКонтекстноеМеню" id="186"/>
					<ExtendedTooltip name="SalesOrdersJobEndDateРасширеннаяПодсказка" id="187"/>
				</LabelField>
				<LabelField name="SalesOrdersAging" id="191">
					<DataPath>SalesOrders.Aging</DataPath>
					<ContextMenu name="SalesOrdersAgingКонтекстноеМеню" id="192"/>
					<ExtendedTooltip name="SalesOrdersAgingРасширеннаяПодсказка" id="193"/>
				</LabelField>
				<LabelField name="SalesOrdersAgedDeferral" id="197">
					<DataPath>SalesOrders.AgedDeferral</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Aged Deferral</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="SalesOrdersAgedDeferralКонтекстноеМеню" id="198"/>
					<ExtendedTooltip name="SalesOrdersAgedDeferralРасширеннаяПодсказка" id="199"/>
				</LabelField>
				<LabelField name="SalesOrdersSalesOrder" id="194">
					<DataPath>SalesOrders.SalesOrder</DataPath>
					<Visible>false</Visible>
					<ContextMenu name="SalesOrdersSalesOrderКонтекстноеМеню" id="195"/>
					<ExtendedTooltip name="SalesOrdersSalesOrderРасширеннаяПодсказка" id="196"/>
				</LabelField>
			</ChildItems>
		</Table>
	</ChildItems>
	<Attributes>
		<Attribute name="Объект" id="1">
			<Type>
				<v8:Type>cfg:DataProcessorObject.BillingSpecialistDesktop</v8:Type>
			</Type>
			<MainAttribute>true</MainAttribute>
		</Attribute>
		<Attribute name="SalesOrders" id="2">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Sales orders</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:DynamicList</v8:Type>
			</Type>
			<UseAlways>
				<Field>~SalesOrders.Invoice</Field>
			</UseAlways>
			<Settings xsi:type="DynamicList">
				<ManualQuery>true</ManualQuery>
				<DynamicDataRead>false</DynamicDataRead>
				<QueryText>ВЫБРАТЬ
	UnbilledARОстатки.Client КАК Customer,
	UnbilledARОстатки.Company КАК Company,
	UnbilledARОстатки.Source КАК Source,
	UnbilledARОстатки.Account КАК Account,
	UnbilledARОстатки.Location КАК Location,
	UnbilledARОстатки.SubSubSegment.БазовыйЭлемент.Родитель.Родитель КАК Segment,
	UnbilledARОстатки.Currency КАК Currency,
	UnbilledARОстатки.AU КАК AU,
	UnbilledARОстатки.AmountОстаток КАК RemainingAmount,
	ВЫБОР
		КОГДА SalesOrdersCommentsСрезПоследних.SalesOrder ЕСТЬ NULL 
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК НетКомментария,
	ВЫБОР
		КОГДА UnbilledARОстатки.SalesOrder В (&amp;МассивОтмеченныхSalesOrders)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Пометка,
	UnbilledARОстатки.SalesOrder.Amount КАК SalesAmount,
	UnbilledARОстатки.SalesOrder КАК SalesOrder,
	UnbilledARОстатки.SalesOrder.Дата КАК SalesDate,
	ВЫБОР
		КОГДА UnbilledARОстатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.Lawson)
			ТОГДА UnbilledARОстатки.SalesOrder.ArInvoice
		ИНАЧЕ UnbilledARОстатки.SalesOrder.Номер
	КОНЕЦ КАК SalesNo,
	SalesOrdersCommentsСрезПоследних.Problem.Reason КАК Reason,
	ВЫБОР
		КОГДА SalesOrdersCommentsСрезПоследних.Problem.Billed ЕСТЬ NULL 
			ТОГДА ЗНАЧЕНИЕ(Перечисление.SalesOrderBilledStatus.Unbilled)
		ИНАЧЕ SalesOrdersCommentsСрезПоследних.Problem.Billed
	КОНЕЦ КАК Status,
	SalesOrdersCommentsСрезПоследних.Problem.ExpectedDateForInvoice КАК ExpectedDateForInvoice,
	SalesOrdersCommentsСрезПоследних.Problem.EscalateTo КАК EscalateTo,
	SalesOrdersCommentsСрезПоследних.Problem.Details КАК Details,
	SalesOrdersCommentsСрезПоследних.Problem.ResponsiblesList КАК ResponsiblesList,
	UnbilledARОстатки.SalesOrder.JobEndDate КАК JobEndDate,
	ВЫБОР
		КОГДА UnbilledARОстатки.SalesOrder.JobEndDate &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
			ТОГДА РАЗНОСТЬДАТ(UnbilledARОстатки.SalesOrder.JobEndDate, &amp;ДатаДляСравнения, ДЕНЬ)
	КОНЕЦ КАК Aging,
	UnbilledARОстатки.SalesOrder.Invoice.Дата КАК InvoiceДата,
	UnbilledARОстатки.SalesOrder.Invoice.Номер КАК InvoiceНомер,
	UnbilledARОстатки.SalesOrder.Invoice.Currency КАК InvoiceCurrency,
	UnbilledARОстатки.SalesOrder.Invoice.Amount КАК InvoiceAmount,
	ВЫБОР
		КОГДА UnbilledARОстатки.SalesOrder.JobEndDate &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
				И РАЗНОСТЬДАТ(UnbilledARОстатки.SalesOrder.JobEndDate, &amp;ДатаДляСравнения, ДЕНЬ) &gt;= 120
			ТОГДА ВЫБОР
					КОГДА ВнутренниеКурсыВалютСрезПоследних.Курс ЕСТЬ NULL 
							ИЛИ ВнутренниеКурсыВалютСрезПоследних.Курс = 0
						ТОГДА 0
					КОГДА UnbilledARОстатки.Currency.Код = "USD"
						ТОГДА UnbilledARОстатки.AmountОстаток
					ИНАЧЕ ВЫРАЗИТЬ(UnbilledARОстатки.AmountОстаток / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность КАК ЧИСЛО(15, 2))
				КОНЕЦ
	КОНЕЦ КАК AgedDeferral,
	SalesOrdersCommentsСрезПервых.Problem.User КАК ResponsibleAR,
	UnbilledARОстатки.Location.БазовыйЭлемент.GeoMarket.Родитель КАК GeoMarket,
	UnbilledARОстатки.Location.БазовыйЭлемент.GeoMarket КАК SubGeoMarket,
	SalesOrdersCommentsСрезПоследних.SalesOrder.Agreement КАК Agreement,
	UnbilledARОстатки.SalesOrder.ClientID КАК CustomerID,
	ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0) КАК Rate,
	ВЫБОР
		КОГДА ВнутренниеКурсыВалютСрезПоследних.Курс ЕСТЬ NULL 
				ИЛИ ВнутренниеКурсыВалютСрезПоследних.Курс = 0
			ТОГДА 0
		КОГДА UnbilledARОстатки.SalesOrder.Currency.Код = "USD"
			ТОГДА UnbilledARОстатки.SalesOrder.Amount
		ИНАЧЕ ВЫРАЗИТЬ(UnbilledARОстатки.SalesOrder.Amount / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность КАК ЧИСЛО(15, 2))
	КОНЕЦ КАК SalesAmountUSD,
	ВЫБОР
		КОГДА ВнутренниеКурсыВалютСрезПоследних.Курс ЕСТЬ NULL 
				ИЛИ ВнутренниеКурсыВалютСрезПоследних.Курс = 0
			ТОГДА 0
		КОГДА UnbilledARОстатки.Currency.Код = "USD"
			ТОГДА UnbilledARОстатки.AmountОстаток
		ИНАЧЕ ВЫРАЗИТЬ(UnbilledARОстатки.AmountОстаток / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность КАК ЧИСЛО(15, 2))
	КОНЕЦ КАК RemainingAmountUSD
ИЗ
	РегистрНакопления.UnbilledAR.Остатки(
			{(&amp;ПериодОстатков)},
			SalesOrder ССЫЛКА Документ.SalesOrder
				И ПОДСТРОКА(Account.Код, 1, 6) &lt;&gt; "209000" {(Location.БазовыйЭлемент.GeoMarket.Родитель = &amp;GeoMarket) КАК Поле2}) КАК UnbilledARОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.SalesOrdersComments.СрезПоследних({(&amp;ДатаКомментария)}, ) КАК SalesOrdersCommentsСрезПоследних
		ПО UnbilledARОстатки.SalesOrder = SalesOrdersCommentsСрезПоследних.SalesOrder
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних({(&amp;ДатаКурса)}, ) КАК ВнутренниеКурсыВалютСрезПоследних
		ПО UnbilledARОстатки.Currency = ВнутренниеКурсыВалютСрезПоследних.Валюта
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.SalesOrdersComments.СрезПервых КАК SalesOrdersCommentsСрезПервых
		ПО UnbilledARОстатки.SalesOrder = SalesOrdersCommentsСрезПервых.SalesOrder
		{ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.SalesOrderResponsibles КАК SalesOrderResponsibles
		ПО UnbilledARОстатки.SalesOrder = SalesOrderResponsibles.SalesOrder}
{ГДЕ
	UnbilledARОстатки.Source.*,
	UnbilledARОстатки.Company.*,
	UnbilledARОстатки.Client.*,
	SalesOrderResponsibles.ResponsibleAR.*}</QueryText>
				<ListSettings>
					<dcsset:filter>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>dfcece9d-5077-440b-b6b3-45a5cb4538eb</dcsset:userSettingID>
					</dcsset:filter>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>SalesOrder</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>88619765-ccb3-46c6-ac52-38e9c992ebd4</dcsset:userSettingID>
					</dcsset:order>
					<dcsset:conditionalAppearance>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>Company.Код</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter/>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Формат</dcscor:parameter>
									<dcscor:value xsi:type="xs:string">ЧРГ=; ЧГ=</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>JobEndDate</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>SalesDate</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter/>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Формат</dcscor:parameter>
									<dcscor:value xsi:type="xs:string">ДФ=MM/dd/yyyy</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>b75fecce-942b-4aed-abc9-e6a02e460fb3</dcsset:userSettingID>
					</dcsset:conditionalAppearance>
					<dcsset:itemsViewMode>Normal</dcsset:itemsViewMode>
					<dcsset:itemsUserSettingID>911b6018-f537-43e8-a417-da56b22f9aec</dcsset:itemsUserSettingID>
				</ListSettings>
			</Settings>
		</Attribute>
		<Attribute name="ОтмеченныеSalesOrders" id="3">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отмеченные sales orders</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>v8:ValueListType</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="Source" id="4">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Source</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:EnumRef.ТипыСоответствий</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="Client" id="5">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Client</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:CatalogRef.Контрагенты</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="GeoMarket" id="6">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Geo market</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:CatalogRef.HFM_Geomarkets</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="Company" id="7">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Company</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:CatalogRef.Организации</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="Period" id="8">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Period</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>xs:dateTime</v8:Type>
				<v8:DateQualifiers>
					<v8:DateFractions>Date</v8:DateFractions>
				</v8:DateQualifiers>
			</Type>
		</Attribute>
		<Attribute name="Account" id="9">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Account</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:ChartOfAccountsRef.Lawson</v8:Type>
				<v8:Type>cfg:ChartOfAccountsRef.Oracle</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="NoComments" id="10">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Without comments</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>xs:boolean</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="SalesOrder" id="11">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Sales order</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:DocumentRef.SalesOrder</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="Segment" id="12">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Segment</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:CatalogRef.HFM_Technology</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="Status" id="13">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Status</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:EnumRef.SalesOrderBilledStatus</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="SubGeoMarket" id="14">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Sub Geo market</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:CatalogRef.HFM_Geomarkets</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="OnlyMyItems" id="15">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Only my items</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>xs:boolean</v8:Type>
			</Type>
		</Attribute>
		<Attribute name="CurrentLDAPUser" id="16">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Current LDAPUser</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:CatalogRef.LDAPUsers</v8:Type>
			</Type>
		</Attribute>
	</Attributes>
	<Commands>
		<Command name="УстановитьФлажки" id="1">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Установить флажки</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Установить флажки</v8:content>
				</v8:item>
			</ToolTip>
			<Picture>
				<xr:Ref>StdPicture.CheckAll</xr:Ref>
				<xr:LoadTransparent>true</xr:LoadTransparent>
			</Picture>
			<Action>УстановитьФлажки</Action>
			<Representation>Picture</Representation>
		</Command>
		<Command name="СнятьФлажки" id="2">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Снять флажки</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Снять флажки</v8:content>
				</v8:item>
			</ToolTip>
			<Picture>
				<xr:Ref>StdPicture.UncheckAll</xr:Ref>
				<xr:LoadTransparent>true</xr:LoadTransparent>
			</Picture>
			<Action>СнятьФлажки</Action>
			<Representation>Picture</Representation>
		</Command>
		<Command name="AddStatus" id="3">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Add status</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Add status</v8:content>
				</v8:item>
			</ToolTip>
			<Action>AddStatus</Action>
		</Command>
	</Commands>
</Form>