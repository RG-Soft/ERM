<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Client</dataPath>
			<field>Client</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>SubSubSegment</dataPath>
			<field>SubSubSegment</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>AU</dataPath>
			<field>AU</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Source</dataPath>
			<field>Source</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Currency</dataPath>
			<field>Currency</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Invoice</dataPath>
			<field>Invoice</field>
			<presentationExpression>ПредставлениеДокумента</presentationExpression>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>BaseAmountОстаток</dataPath>
			<field>BaseAmountОстаток</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>AmountОстаток</dataPath>
			<field>AmountОстаток</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Account</dataPath>
			<field>Account</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Company</dataPath>
			<field>Company</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Location</dataPath>
			<field>Location</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИдентификаторКлиента</dataPath>
			<field>ИдентификаторКлиента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Идентификатор клиента</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГоловнойКонтрагент</dataPath>
			<field>ГоловнойКонтрагент</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Memo</dataPath>
			<field>Memo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Rate</dataPath>
			<field>Rate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Rate</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=10; ЧДЦ=4</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Status</dataPath>
			<field>Status</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ГоризонтальноеПоложение</dcscor:parameter>
					<dcscor:value xsi:type="v8ui:HorizontalAlign">Justify</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПредставлениеДокумента</dataPath>
			<field>ПредставлениеДокумента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Представление документа</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ForecastDate</dataPath>
			<field>ForecastDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>SLBAssignedTo</dataPath>
			<field>SLBAssignedTo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceДатаОтправкиКС</dataPath>
			<field>InvoiceДатаОтправкиКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceДатаВозвратаКС</dataPath>
			<field>InvoiceДатаВозвратаКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceСтатусВозвратаКС</dataPath>
			<field>InvoiceСтатусВозвратаКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceКомментарийСтатусаВозвратаКС</dataPath>
			<field>InvoiceКомментарийСтатусаВозвратаКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Agreement</dataPath>
			<field>Agreement</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Agreement</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceНомер</dataPath>
			<field>InvoiceНомер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Invoice номер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceНомерДокумента</dataPath>
			<field>InvoiceНомерДокумента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Invoice номер документа</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceStatusOfDispute</dataPath>
			<field>InvoiceStatusOfDispute</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceAmount</dataPath>
			<field>InvoiceAmount</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceTriggerDate</dataPath>
			<field>InvoiceTriggerDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractTrigger</dataPath>
			<field>InvoiceContractTrigger</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDisputeCollectableDate</dataPath>
			<field>InvoiceDisputeCollectableDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDueDateFrom</dataPath>
			<field>InvoiceDueDateFrom</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractPTDaysFrom</dataPath>
			<field>InvoiceContractPTDaysFrom</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractСрокОплаты</dataPath>
			<field>InvoiceContractСрокОплаты</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDueDateTo</dataPath>
			<field>InvoiceDueDateTo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDisputeDistributedDate</dataPath>
			<field>InvoiceDisputeDistributedDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceДата</dataPath>
			<field>InvoiceДата</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceFiscalInvoiceNo</dataPath>
			<field>InvoiceFiscalInvoiceNo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceFiscalInvoiceDate</dataPath>
			<field>InvoiceFiscalInvoiceDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractAmendmentName</dataPath>
			<field>InvoiceContractAmendmentName</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CashBatch</dataPath>
			<field>CashBatch</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>TransType</dataPath>
			<field>TransType</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Trans type</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Paid</dataPath>
			<field>Paid</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Paid</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>PaymentDate</dataPath>
			<field>PaymentDate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Payment date</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=MM/dd/yy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Comment</dataPath>
			<field>Comment</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Comment</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ConfirmedBy</dataPath>
			<field>ConfirmedBy</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Confirmed by</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustInputDate</dataPath>
			<field>CustInputDate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Cust input date</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RWDTargetDate</dataPath>
			<field>RWDTargetDate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>RWDTarget date</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustomerRepresentative</dataPath>
			<field>CustomerRepresentative</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Customer representative</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RemedialWorkPlan</dataPath>
			<field>RemedialWorkPlan</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Remedial work plan</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustomerInputDetails</dataPath>
			<field>CustomerInputDetails</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Customer input details</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>BrokenPromises</dataPath>
			<field>BrokenPromises</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Broken promises</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>EscalationSent</dataPath>
			<field>EscalationSent</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Escalation sent</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>LegalEntity</dataPath>
			<field>LegalEntity</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>USDAmount</dataPath>
			<field>USDAmount</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>USD Amount</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>NotDue</dataPath>
			<field>NotDue</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Not due</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InRangeNoColl</dataPath>
			<field>InRangeNoColl</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>In range no coll</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>UnderLitigation</dataPath>
			<field>UnderLitigation</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Under litigation</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>FcstCollect</dataPath>
			<field>FcstCollect</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Fcst collect</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>NoFrcst</dataPath>
			<field>NoFrcst</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>No frcst</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>DueTo</dataPath>
			<field>DueTo</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Due to</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>OverdueDispute</dataPath>
			<field>OverdueDispute</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Overdue dispute</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>DueFrom</dataPath>
			<field>DueFrom</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Due from</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>OverdueNoFcst</dataPath>
			<field>OverdueNoFcst</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Overdue no fcst</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Collector</dataPath>
			<field>Collector</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Collector</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	BilledARОстатки.Client КАК Client,
	BilledARОстатки.Company КАК Company,
	BilledARОстатки.Source КАК Source,
	BilledARОстатки.AU.ПодразделениеОрганизации КАК Location,
	BilledARОстатки.AU.Сегмент КАК SubSubSegment,
	BilledARОстатки.Invoice КАК Invoice,
	BilledARОстатки.Account,
	BilledARОстатки.Currency КАК Currency,
	BilledARОстатки.AU КАК AU,
	BilledARОстатки.AmountОстаток,
	ВЫБОР
		КОГДА BilledARОстатки.Invoice ССЫЛКА Документ.Invoice
			ТОГДА ВЫРАЗИТЬ(BilledARОстатки.Invoice КАК Документ.Invoice).DocNumber
		ИНАЧЕ ВЫРАЗИТЬ(BilledARОстатки.Invoice КАК Документ.Memo).Номер
	КОНЕЦ КАК ПредставлениеДокумента,
	BilledARОстатки.LegalEntity
ПОМЕСТИТЬ ВТ_Остатки
ИЗ
	РегистрНакопления.BilledAR.Остатки({(&amp;ПериодОстатков)}, ) КАК BilledARОстатки

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	UnallocatedMemoОстатки.Client,
	UnallocatedMemoОстатки.Company,
	UnallocatedMemoОстатки.Source,
	UnallocatedMemoОстатки.AU.ПодразделениеОрганизации,
	UnallocatedMemoОстатки.AU.Сегмент,
	UnallocatedMemoОстатки.Memo,
	UnallocatedMemoОстатки.Account,
	UnallocatedMemoОстатки.Currency,
	UnallocatedMemoОстатки.AU,
	UnallocatedMemoОстатки.AmountОстаток,
	UnallocatedMemoОстатки.Memo.Номер,
	UnallocatedMemoОстатки.LegalEntity
ИЗ
	РегистрНакопления.UnallocatedMemo.Остатки({(&amp;ПериодОстатков)}, ) КАК UnallocatedMemoОстатки

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	BilledARОбороты.Client КАК Client,
	BilledARОбороты.Company КАК Company,
	BilledARОбороты.Source КАК Source,
	BilledARОбороты.AU.ПодразделениеОрганизации КАК Location,
	BilledARОбороты.AU.Сегмент КАК SubSubSegment,
	BilledARОбороты.Invoice КАК Invoice,
	BilledARОбороты.Account,
	BilledARОбороты.Currency КАК Currency,
	BilledARОбороты.AU КАК AU,
	BilledARОбороты.AmountОборот,
	ВЫБОР
		КОГДА BilledARОбороты.Invoice ССЫЛКА Документ.Invoice
			ТОГДА ВЫРАЗИТЬ(BilledARОбороты.Invoice КАК Документ.Invoice).DocNumber
		ИНАЧЕ ВЫРАЗИТЬ(BilledARОбороты.Invoice КАК Документ.Memo).Номер
	КОНЕЦ КАК ПредставлениеДокумента,
	BilledARОбороты.LegalEntity
ПОМЕСТИТЬ ВТ_Обороты
ИЗ
	РегистрНакопления.BilledAR.Обороты({(&amp;ПериодОстатков)}, {(&amp;КонецДняФормированияОтчета)}, , ) КАК BilledARОбороты

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	UnallocatedMemoОбороты.Client,
	UnallocatedMemoОбороты.Company,
	UnallocatedMemoОбороты.Source,
	UnallocatedMemoОбороты.AU.ПодразделениеОрганизации,
	UnallocatedMemoОбороты.AU.Сегмент,
	UnallocatedMemoОбороты.Memo,
	UnallocatedMemoОбороты.Account,
	UnallocatedMemoОбороты.Currency,
	UnallocatedMemoОбороты.AU,
	UnallocatedMemoОбороты.AmountОборот,
	UnallocatedMemoОбороты.Memo.Номер,
	UnallocatedMemoОбороты.LegalEntity
ИЗ
	РегистрНакопления.UnallocatedMemo.Обороты({(&amp;ПериодОстатков)}, {(&amp;КонецДняФормированияОтчета)}, , ) КАК UnallocatedMemoОбороты

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	PaymentsОбороты.Client КАК Client,
	PaymentsОбороты.Company КАК Company,
	PaymentsОбороты.Source КАК Source,
	PaymentsОбороты.AU.ПодразделениеОрганизации КАК Location,
	PaymentsОбороты.AU.Сегмент КАК SubSubSegment,
	PaymentsОбороты.Invoice КАК Invoice,
	PaymentsОбороты.Currency КАК Currency,
	PaymentsОбороты.AU КАК AU,
	PaymentsОбороты.AmountОборот КАК AmountОборот,
	PaymentsОбороты.LegalEntity
ПОМЕСТИТЬ ВТ_ОплатыТекущегоПериода
ИЗ
	РегистрНакопления.Payments.Обороты(
			{(&amp;ПериодОстатков)},
			{(&amp;КонецДняФормированияОтчета)},
			,
			(Client, Company, Source, Invoice, Currency, AU, LegalEntity) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ВТ_Обороты.Client,
					ВТ_Обороты.Company,
					ВТ_Обороты.Source,
					ВТ_Обороты.Invoice,
					ВТ_Обороты.Currency,
					ВТ_Обороты.AU,
					ВТ_Обороты.LegalEntity
				ИЗ
					ВТ_Обороты КАК ВТ_Обороты
				ГДЕ
					ВТ_Обороты.Invoice ССЫЛКА Документ.Invoice)) КАК PaymentsОбороты

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Обороты.Client,
	ВТ_Обороты.Company,
	ВТ_Обороты.Source,
	ВТ_Обороты.Location,
	ВТ_Обороты.SubSubSegment,
	ВТ_Обороты.Invoice,
	ВТ_Обороты.Account,
	ВТ_Обороты.Currency,
	ВТ_Обороты.AU,
	ВТ_Обороты.AmountОборот + ЕСТЬNULL(ВТ_Оплаты.AmountОборот, 0) КАК AmountОстаток,
	ВТ_Обороты.ПредставлениеДокумента,
	ВТ_Обороты.LegalEntity
ПОМЕСТИТЬ ВТ_ОборотыБезОплат
ИЗ
	ВТ_Обороты КАК ВТ_Обороты
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОплатыТекущегоПериода КАК ВТ_Оплаты
		ПО ВТ_Обороты.Client = ВТ_Оплаты.Client
			И ВТ_Обороты.Company = ВТ_Оплаты.Company
			И ВТ_Обороты.Source = ВТ_Оплаты.Source
			И ВТ_Обороты.Location = ВТ_Оплаты.Location
			И ВТ_Обороты.SubSubSegment = ВТ_Оплаты.SubSubSegment
			И ВТ_Обороты.Invoice = ВТ_Оплаты.Invoice
			И ВТ_Обороты.Currency = ВТ_Оплаты.Currency
			И ВТ_Обороты.AU = ВТ_Оплаты.AU
			И ВТ_Обороты.LegalEntity = ВТ_Оплаты.LegalEntity
ГДЕ
	ВТ_Обороты.AmountОборот + ЕСТЬNULL(ВТ_Оплаты.AmountОборот, 0) &lt;&gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос.Client КАК Client,
	ВложенныйЗапрос.Company,
	ВложенныйЗапрос.Source КАК Source,
	ВложенныйЗапрос.Location,
	ВложенныйЗапрос.SubSubSegment,
	ВложенныйЗапрос.Invoice,
	ВложенныйЗапрос.Account,
	ВложенныйЗапрос.Currency,
	ВложенныйЗапрос.AU,
	СУММА(ВложенныйЗапрос.AmountОстаток) КАК AmountОстаток,
	ВложенныйЗапрос.ПредставлениеДокумента,
	ВложенныйЗапрос.LegalEntity,
	ВЫБОР
		КОГДА ИсточникиСЗаполнениемОплатИзОбмена.Source ЕСТЬ NULL
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК ЗаполнятьОплатыПоДаннымОбмена
ПОМЕСТИТЬ ВТ_ОстаткиБезОплатТекущегоПериода
ИЗ
	(ВЫБРАТЬ
		ВТ_Остатки.Client КАК Client,
		ВТ_Остатки.Company КАК Company,
		ВТ_Остатки.Source КАК Source,
		ВТ_Остатки.Location КАК Location,
		ВТ_Остатки.SubSubSegment КАК SubSubSegment,
		ВТ_Остатки.Invoice КАК Invoice,
		ВТ_Остатки.Account КАК Account,
		ВТ_Остатки.Currency КАК Currency,
		ВТ_Остатки.AU КАК AU,
		ВТ_Остатки.AmountОстаток КАК AmountОстаток,
		ВТ_Остатки.ПредставлениеДокумента КАК ПредставлениеДокумента,
		ВТ_Остатки.LegalEntity КАК LegalEntity
	ИЗ
		ВТ_Остатки КАК ВТ_Остатки
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ВТ_ОборотыБезОплат.Client,
		ВТ_ОборотыБезОплат.Company,
		ВТ_ОборотыБезОплат.Source,
		ВТ_ОборотыБезОплат.Location,
		ВТ_ОборотыБезОплат.SubSubSegment,
		ВТ_ОборотыБезОплат.Invoice,
		ВТ_ОборотыБезОплат.Account,
		ВТ_ОборотыБезОплат.Currency,
		ВТ_ОборотыБезОплат.AU,
		ВТ_ОборотыБезОплат.AmountОстаток,
		ВТ_ОборотыБезОплат.ПредставлениеДокумента,
		ВТ_ОборотыБезОплат.LegalEntity
	ИЗ
		ВТ_ОборотыБезОплат КАК ВТ_ОборотыБезОплат) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ИсточникиСЗаполнениемОплатИзОбмена КАК ИсточникиСЗаполнениемОплатИзОбмена
		ПО ВложенныйЗапрос.Source = ИсточникиСЗаполнениемОплатИзОбмена.Source
			И (ВложенныйЗапрос.Company = ИсточникиСЗаполнениемОплатИзОбмена.Company
				ИЛИ ИсточникиСЗаполнениемОплатИзОбмена.Company = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.Client,
	ВложенныйЗапрос.Company,
	ВложенныйЗапрос.Source,
	ВложенныйЗапрос.Location,
	ВложенныйЗапрос.SubSubSegment,
	ВложенныйЗапрос.Invoice,
	ВложенныйЗапрос.Account,
	ВложенныйЗапрос.Currency,
	ВложенныйЗапрос.AU,
	ВложенныйЗапрос.ПредставлениеДокумента,
	ВложенныйЗапрос.LegalEntity,
	ВЫБОР
		КОГДА ИсточникиСЗаполнениемОплатИзОбмена.Source ЕСТЬ NULL
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ

ИНДЕКСИРОВАТЬ ПО
	Client,
	Source
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	PaymentsОбороты.Client КАК Client,
	PaymentsОбороты.Company КАК Company,
	PaymentsОбороты.Source КАК Source,
	PaymentsОбороты.AU.ПодразделениеОрганизации КАК Location,
	PaymentsОбороты.AU.Сегмент КАК SubSubSegment,
	PaymentsОбороты.Invoice КАК Invoice,
	PaymentsОбороты.Currency КАК Currency,
	PaymentsОбороты.AU КАК AU,
	СУММА(PaymentsОбороты.AmountОборот) КАК Paid,
	МАКСИМУМ(ВЫБОР
			КОГДА PaymentsОбороты.Регистратор ССЫЛКА Документ.ПроводкаDSS
				ТОГДА PaymentsОбороты.Регистратор.DateLawson
			КОГДА PaymentsОбороты.Регистратор ССЫЛКА Документ.КорректировкаТранзакции
					И ВЫРАЗИТЬ(PaymentsОбороты.Регистратор КАК Документ.КорректировкаТранзакции).ДокументОснование ССЫЛКА Документ.ПроводкаDSS
				ТОГДА ВЫРАЗИТЬ(ВЫРАЗИТЬ(PaymentsОбороты.Регистратор КАК Документ.КорректировкаТранзакции).ДокументОснование КАК Документ.ПроводкаDSS).AccountingPeriod
			КОГДА PaymentsОбороты.Регистратор ССЫЛКА Документ.КорректировкаТранзакции
				ТОГДА ВЫРАЗИТЬ(PaymentsОбороты.Регистратор КАК Документ.КорректировкаТранзакции).ДокументОснование.Дата
			ИНАЧЕ PaymentsОбороты.Регистратор.Дата
		КОНЕЦ) КАК PaymentDate,
	PaymentsОбороты.LegalEntity
ПОМЕСТИТЬ ВТ_ОплатыПоПроводкам
ИЗ
	РегистрНакопления.Payments.Обороты(
			{(&amp;ПериодОстатков)},
			{(&amp;КонецДняФормированияОтчета)},
			Регистратор,
			(Client, Company, Source, Invoice, Currency, AU, LegalEntity) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ВТ_ОстаткиБезОплатТекущегоПериода.Client,
					ВТ_ОстаткиБезОплатТекущегоПериода.Company,
					ВТ_ОстаткиБезОплатТекущегоПериода.Source,
					ВТ_ОстаткиБезОплатТекущегоПериода.Invoice,
					ВТ_ОстаткиБезОплатТекущегоПериода.Currency,
					ВТ_ОстаткиБезОплатТекущегоПериода.AU,
					ВТ_ОстаткиБезОплатТекущегоПериода.LegalEntity
				ИЗ
					ВТ_ОстаткиБезОплатТекущегоПериода КАК ВТ_ОстаткиБезОплатТекущегоПериода
						ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ИсточникиСЗаполнениемОплатИзОбмена КАК ИсточникиСЗаполнениемОплатИзОбмена
						ПО
							ВТ_ОстаткиБезОплатТекущегоПериода.Source = ИсточникиСЗаполнениемОплатИзОбмена.Source
								И (ВТ_ОстаткиБезОплатТекущегоПериода.Company = ИсточникиСЗаполнениемОплатИзОбмена.Company
									ИЛИ ИсточникиСЗаполнениемОплатИзОбмена.Company = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))
				ГДЕ
					ВТ_ОстаткиБезОплатТекущегоПериода.Invoice ССЫЛКА Документ.Invoice
					И ИсточникиСЗаполнениемОплатИзОбмена.Source ЕСТЬ NULL)) КАК PaymentsОбороты

СГРУППИРОВАТЬ ПО
	PaymentsОбороты.Client,
	PaymentsОбороты.Company,
	PaymentsОбороты.Source,
	PaymentsОбороты.AU.ПодразделениеОрганизации,
	PaymentsОбороты.AU.Сегмент,
	PaymentsОбороты.Invoice,
	PaymentsОбороты.Currency,
	PaymentsОбороты.AU,
	PaymentsОбороты.LegalEntity

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	FiscalPayments.Source,
	FiscalPayments.Company,
	FiscalPayments.Invoice,
	FiscalPayments.Currency,
	СУММА(FiscalPayments.Amount) КАК Paid,
	МАКСИМУМ(FiscalPayments.PaymentDate) КАК PaymentDate,
	СУММА(FiscalPayments.SettlementAmount) КАК SettlementAmount
ПОМЕСТИТЬ ВТ_ОплатыИзОбмена
ИЗ
	РегистрСведений.FiscalPayments КАК FiscalPayments
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ИсточникиСЗаполнениемОплатИзОбмена КАК ИсточникиСЗаполнениемОплатИзОбмена
		ПО FiscalPayments.Source = ИсточникиСЗаполнениемОплатИзОбмена.Source
			И (FiscalPayments.Company = ИсточникиСЗаполнениемОплатИзОбмена.Company
				ИЛИ ИсточникиСЗаполнениемОплатИзОбмена.Company = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))
ГДЕ
	FiscalPayments.PaymentDate &gt;= &amp;ПериодОстатков
	И FiscalPayments.PaymentDate &lt;= &amp;КонецДняФормированияОтчета

СГРУППИРОВАТЬ ПО
	FiscalPayments.Invoice,
	FiscalPayments.Currency,
	FiscalPayments.Source,
	FiscalPayments.Company
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИерархияКонтрагентовСрезПоследних.Контрагент КАК Контрагент,
	ИерархияКонтрагентовСрезПоследних.ГоловнойКонтрагент
ПОМЕСТИТЬ ВТ_ИерархияКлиентов
ИЗ
	РегистрСведений.ИерархияКонтрагентов.СрезПоследних(
			,
			Контрагент В
				(ВЫБРАТЬ
					ВТ_ОстаткиБезОплатТекущегоПериода.Client
				ИЗ
					ВТ_ОстаткиБезОплатТекущегоПериода КАК ВТ_ОстаткиБезОплатТекущегоПериода)) КАК ИерархияКонтрагентовСрезПоследних

ИНДЕКСИРОВАТЬ ПО
	Контрагент
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Остатки.Client,
	ВТ_Остатки.Company,
	ВТ_Остатки.Source,
	ВТ_Остатки.Location,
	ВТ_Остатки.SubSubSegment,
	ВТ_Остатки.Account,
	ВТ_Остатки.Currency,
	ВТ_Остатки.AU,
	ВТ_Остатки.Invoice.ClientID КАК ИдентификаторКлиента,
	СУММА(ВТ_Остатки.AmountОстаток) КАК AmountОстаток,
	СУММА(ВЫБОР
			КОГДА ВнутренниеКурсыВалютСрезПоследних.Курс ЕСТЬ NULL
					ИЛИ ВнутренниеКурсыВалютСрезПоследних.Курс = 0
				ТОГДА 0
			ИНАЧЕ ВТ_Остатки.AmountОстаток / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность
		КОНЕЦ) КАК BaseAmountОстаток,
	ВТ_ИерархияКлиентов.ГоловнойКонтрагент,
	ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0) КАК Rate,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice.DueDateTo &lt;= &amp;Период
				И InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)
		ИНАЧЕ ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Status, ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка))
	КОНЕЦ КАК Status,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ConfirmedBy, "") КАК ConfirmedBy,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Comment, "") КАК Comment,
	ВТ_Остатки.ПредставлениеДокумента,
	ВЫБОР
		КОГДА InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ВТ_Остатки.Invoice.DueDateTo
		КОГДА (InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
				ИЛИ InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.PartiallyPaid))
				И ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
				И ЕСТЬNULL(ВТ_ОплатыИзОбмена.PaymentDate, ДАТАВРЕМЯ(1, 1, 1)) &gt;= &amp;ПериодОстатков
			ТОГДА ЕСТЬNULL(ВТ_ОплатыИзОбмена.PaymentDate, ДАТАВРЕМЯ(1, 1, 1))
		КОГДА (InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
				ИЛИ InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.PartiallyPaid))
				И НЕ ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
				И ЕСТЬNULL(ВТ_ОплатыПоПроводкам.PaymentDate, ДАТАВРЕМЯ(1, 1, 1)) &gt;= &amp;ПериодОстатков
			ТОГДА ЕСТЬNULL(ВТ_ОплатыПоПроводкам.PaymentDate, ДАТАВРЕМЯ(1, 1, 1))
		ИНАЧЕ ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1))
	КОНЕЦ КАК ForecastDate,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.CustInputDate, ДАТАВРЕМЯ(1, 1, 1)) КАК CustInputDate,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.CustomerRepresentative, "") КАК CustomerRepresentative,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.CustomerInputDetails, "") КАК CustomerInputDetails,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList, "") КАК SLBAssignedTo,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.RemedialWorkPlan, "") КАК RemedialWorkPlan,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.RWDTargetDate, ДАТАВРЕМЯ(1, 1, 1)) КАК RWDTargetDate,
	ВТ_Остатки.Invoice.ДатаВозвратаКС,
	ВТ_Остатки.Invoice.ДатаОтправкиКС,
	ВТ_Остатки.Invoice.СтатусВозвратаКС,
	ВТ_Остатки.Invoice.КомментарийСтатусаВозвратаКС,
	ЕСТЬNULL(Collectors.Collector, ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)) КАК Collector,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice.Contract = ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)
				ИЛИ ВТ_Остатки.Invoice.Contract.Ссылка ЕСТЬ NULL
			ТОГДА ВТ_Остатки.Invoice.Agreement
		ИНАЧЕ ВТ_Остатки.Invoice.Contract.crmContractName
	КОНЕЦ КАК Agreement,
	ВЫБОР
		КОГДА ВТ_Остатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.OracleMI)
				И ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
				И ВТ_Остатки.Invoice.FiscalInvoiceNo &lt;&gt; ""
			ТОГДА ВТ_Остатки.Invoice.FiscalInvoiceNo
		ИНАЧЕ ВТ_Остатки.ПредставлениеДокумента
	КОНЕЦ КАК InvoiceНомер,
	ВТ_Остатки.Invoice.Номер КАК InvoiceНомерДокумента,
	ВТ_Остатки.Invoice.Дата КАК InvoiceДата,
	ВТ_Остатки.Invoice.FiscalInvoiceNo КАК InvoiceFiscalInvoiceNo,
	ВТ_Остатки.Invoice.FiscalInvoiceDate КАК InvoiceFiscalInvoiceDate,
	СУММА(ВТ_Остатки.Invoice.Amount) КАК InvoiceAmount,
	ВТ_Остатки.Invoice.Contract.Trigger КАК InvoiceContractTrigger,
	ВТ_Остатки.Invoice.TriggerDate КАК InvoiceTriggerDate,
	ВТ_Остатки.Invoice.Contract.PTDaysFrom КАК InvoiceContractPTDaysFrom,
	ВТ_Остатки.Invoice.Contract.СрокОплаты КАК InvoiceContractСрокОплаты,
	ВТ_Остатки.Invoice.DueDateFrom КАК InvoiceDueDateFrom,
	ВТ_Остатки.Invoice.DueDateTo КАК InvoiceDueDateTo,
	ВТ_Остатки.Invoice.StatusOfDispute КАК InvoiceStatusOfDispute,
	ВТ_Остатки.Invoice.DisputeDistributedDate КАК InvoiceDisputeDistributedDate,
	ВТ_Остатки.Invoice.DisputeCollectableDate КАК InvoiceDisputeCollectableDate,
	ВТ_Остатки.Invoice.Contract.AmendmentName КАК InvoiceContractAmendmentName,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
			ТОГДА "I"
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Memo
			ТОГДА "Memo"
		ИНАЧЕ ""
	КОНЕЦ КАК TransType,
	СУММА(ВЫБОР
			КОГДА НЕ ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
				ТОГДА ЕСТЬNULL(ВТ_ОплатыПоПроводкам.Paid / ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам.Курс * ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам.Кратность, 0)
			ИНАЧЕ ЕСТЬNULL(ВТ_ОплатыИзОбмена.SettlementAmount / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность, 0)
		КОНЕЦ) КАК Paid,
	МАКСИМУМ(ВЫБОР
			КОГДА НЕ ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
					И ЕСТЬNULL(ВТ_ОплатыПоПроводкам.PaymentDate, ДАТАВРЕМЯ(1, 1, 1)) &gt;= &amp;ПериодОстатков
				ТОГДА ЕСТЬNULL(ВТ_ОплатыПоПроводкам.PaymentDate, ДАТАВРЕМЯ(1, 1, 1))
			КОГДА НЕ ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
				ТОГДА ДАТАВРЕМЯ(1, 1, 1)
			КОГДА ЕСТЬNULL(ВТ_ОплатыИзОбмена.PaymentDate, ДАТАВРЕМЯ(1, 1, 1)) &gt;= &amp;ПериодОстатков
				ТОГДА ЕСТЬNULL(ВТ_ОплатыИзОбмена.PaymentDate, ДАТАВРЕМЯ(1, 1, 1))
			ИНАЧЕ ДАТАВРЕМЯ(1, 1, 1)
		КОНЕЦ) КАК PaymentDate,
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1)) = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ЛОЖЬ
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Status, ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)) = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
			ТОГДА ЛОЖЬ
		КОГДА РАЗНОСТЬДАТ(InvoiceCommentsСрезПоследних.Problem.ForecastDate, &amp;ТекущаяДата, ДЕНЬ) &gt; 0
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК BrokenPromises,
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList, "") = ""
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК EscalationSent,
	ВЫБОР
		КОГДА ВТ_Остатки.LegalEntity &lt;&gt; ЗНАЧЕНИЕ(Справочник.LegalEntiites.ПустаяСсылка)
			ТОГДА ВТ_Остатки.LegalEntity
		ИНАЧЕ ВТ_Остатки.Company.DefaultLegalEntity
	КОНЕЦ КАК LegalEntity,
	СУММА(ВЫБОР
			КОГДА ВТ_Остатки.Currency &lt;&gt; &amp;USD
					И ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0) = 0
				ТОГДА 0
			КОГДА ВТ_Остатки.Currency &lt;&gt; &amp;USD
				ТОГДА ВТ_Остатки.AmountОстаток / ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0)
			ИНАЧЕ ВТ_Остатки.AmountОстаток
		КОНЕЦ) КАК USDAmount
ПОМЕСТИТЬ ВТ_ДетальныеЗаписи
ИЗ
	ВТ_ОстаткиБезОплатТекущегоПериода КАК ВТ_Остатки
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИерархияКлиентов КАК ВТ_ИерархияКлиентов
		ПО ВТ_Остатки.Client = ВТ_ИерархияКлиентов.Контрагент
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних КАК ВнутренниеКурсыВалютСрезПоследних
		ПО ВТ_Остатки.Currency = ВнутренниеКурсыВалютСрезПоследних.Валюта
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.InvoiceComments.СрезПоследних({(&amp;КонецМесяцаФормированияОтчета)}, НЕ Inactive) КАК InvoiceCommentsСрезПоследних
		ПО ВТ_Остатки.Invoice = InvoiceCommentsСрезПоследних.Invoice
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Collectors КАК Collectors
		ПО ВТ_Остатки.Client = Collectors.Client
			И (Collectors.GeoMarket = ВТ_Остатки.Location.БазовыйЭлемент.GeoMarket.Родитель
				ИЛИ Collectors.GeoMarket = ЗНАЧЕНИЕ(Справочник.HFM_Geomarkets.ПустаяСсылка))
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОплатыИзОбмена КАК ВТ_ОплатыИзОбмена
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних КАК ВнутренниеКурсыВалютСрезПоследнихОплатыИзОбмена
			ПО ВТ_ОплатыИзОбмена.Currency = ВнутренниеКурсыВалютСрезПоследнихОплатыИзОбмена.Валюта
		ПО ВТ_Остатки.Company = ВТ_ОплатыИзОбмена.Company
			И ВТ_Остатки.Source = ВТ_ОплатыИзОбмена.Source
			И ВТ_Остатки.Invoice = ВТ_ОплатыИзОбмена.Invoice
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОплатыПоПроводкам КАК ВТ_ОплатыПоПроводкам
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних КАК ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам
			ПО ВТ_ОплатыПоПроводкам.Currency = ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам.Валюта
		ПО ВТ_Остатки.Client = ВТ_ОплатыПоПроводкам.Client
			И ВТ_Остатки.Company = ВТ_ОплатыПоПроводкам.Company
			И ВТ_Остатки.Source = ВТ_ОплатыПоПроводкам.Source
			И ВТ_Остатки.Location = ВТ_ОплатыПоПроводкам.Location
			И ВТ_Остатки.SubSubSegment = ВТ_ОплатыПоПроводкам.SubSubSegment
			И ВТ_Остатки.Invoice = ВТ_ОплатыПоПроводкам.Invoice
			И ВТ_Остатки.AU = ВТ_ОплатыПоПроводкам.AU
ГДЕ
	ВТ_Остатки.Client &lt;&gt; ЗНАЧЕНИЕ(Справочник.Контрагенты.NonTrade)
	И ВТ_Остатки.Client &lt;&gt; ЗНАЧЕНИЕ(Справочник.Контрагенты.Unreconciled)
	И НЕ ВТ_Остатки.Client.Intercompany

СГРУППИРОВАТЬ ПО
	ВТ_ИерархияКлиентов.ГоловнойКонтрагент,
	ВТ_Остатки.SubSubSegment,
	ВТ_Остатки.Account,
	ВТ_Остатки.ПредставлениеДокумента,
	ВТ_Остатки.Client,
	ВТ_Остатки.Company,
	ВТ_Остатки.Currency,
	ВТ_Остатки.AU,
	ВТ_Остатки.Source,
	ВТ_Остатки.Location,
	ВТ_Остатки.Invoice.ClientID,
	ВТ_Остатки.Invoice.ДатаВозвратаКС,
	ВТ_Остатки.Invoice.ДатаОтправкиКС,
	ВТ_Остатки.Invoice.СтатусВозвратаКС,
	ВТ_Остатки.Invoice.КомментарийСтатусаВозвратаКС,
	ВЫБОР
		КОГДА ВТ_Остатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.OracleMI)
				И ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
				И ВТ_Остатки.Invoice.FiscalInvoiceNo &lt;&gt; ""
			ТОГДА ВТ_Остатки.Invoice.FiscalInvoiceNo
		ИНАЧЕ ВТ_Остатки.ПредставлениеДокумента
	КОНЕЦ,
	ВТ_Остатки.Invoice.Номер,
	ВТ_Остатки.Invoice.Дата,
	ВТ_Остатки.Invoice.FiscalInvoiceNo,
	ВТ_Остатки.Invoice.FiscalInvoiceDate,
	ВТ_Остатки.Invoice.Contract.Trigger,
	ВТ_Остатки.Invoice.TriggerDate,
	ВТ_Остатки.Invoice.Contract.PTDaysFrom,
	ВТ_Остатки.Invoice.Contract.СрокОплаты,
	ВТ_Остатки.Invoice.DueDateFrom,
	ВТ_Остатки.Invoice.DueDateTo,
	ВТ_Остатки.Invoice.StatusOfDispute,
	ВТ_Остатки.Invoice.DisputeDistributedDate,
	ВТ_Остатки.Invoice.DisputeCollectableDate,
	ВТ_Остатки.Invoice.Contract.AmendmentName,
	ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0),
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
			ТОГДА "I"
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Memo
			ТОГДА "Memo"
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1)) = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ЛОЖЬ
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Status, ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)) = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
			ТОГДА ЛОЖЬ
		КОГДА РАЗНОСТЬДАТ(InvoiceCommentsСрезПоследних.Problem.ForecastDate, &amp;ТекущаяДата, ДЕНЬ) &gt; 0
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ,
	ВЫБОР
		КОГДА ВТ_Остатки.LegalEntity &lt;&gt; ЗНАЧЕНИЕ(Справочник.LegalEntiites.ПустаяСсылка)
			ТОГДА ВТ_Остатки.LegalEntity
		ИНАЧЕ ВТ_Остатки.Company.DefaultLegalEntity
	КОНЕЦ,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice.Contract = ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)
				ИЛИ ВТ_Остатки.Invoice.Contract.Ссылка ЕСТЬ NULL
			ТОГДА ВТ_Остатки.Invoice.Agreement
		ИНАЧЕ ВТ_Остатки.Invoice.Contract.crmContractName
	КОНЕЦ,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice.DueDateTo &lt;= &amp;Период
				И InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)
		ИНАЧЕ ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Status, ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка))
	КОНЕЦ,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ConfirmedBy, ""),
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Comment, ""),
	ВЫБОР
		КОГДА InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ВТ_Остатки.Invoice.DueDateTo
		КОГДА (InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
				ИЛИ InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.PartiallyPaid))
				И ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
				И ЕСТЬNULL(ВТ_ОплатыИзОбмена.PaymentDate, ДАТАВРЕМЯ(1, 1, 1)) &gt;= &amp;ПериодОстатков
			ТОГДА ЕСТЬNULL(ВТ_ОплатыИзОбмена.PaymentDate, ДАТАВРЕМЯ(1, 1, 1))
		КОГДА (InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
				ИЛИ InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.PartiallyPaid))
				И НЕ ВТ_Остатки.ЗаполнятьОплатыПоДаннымОбмена
				И ЕСТЬNULL(ВТ_ОплатыПоПроводкам.PaymentDate, ДАТАВРЕМЯ(1, 1, 1)) &gt;= &amp;ПериодОстатков
			ТОГДА ЕСТЬNULL(ВТ_ОплатыПоПроводкам.PaymentDate, ДАТАВРЕМЯ(1, 1, 1))
		ИНАЧЕ ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1))
	КОНЕЦ,
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.CustInputDate, ДАТАВРЕМЯ(1, 1, 1)),
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.CustomerRepresentative, ""),
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.CustomerInputDetails, ""),
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList, ""),
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.RemedialWorkPlan, ""),
	ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.RWDTargetDate, ДАТАВРЕМЯ(1, 1, 1)),
	ЕСТЬNULL(Collectors.Collector, ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)),
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList, "") = ""
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ

ИМЕЮЩИЕ
	СУММА(ВТ_Остатки.AmountОстаток) &lt;&gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ДетальныеЗаписи.Client,
	ВТ_ДетальныеЗаписи.Company,
	ВТ_ДетальныеЗаписи.Source,
	ВТ_ДетальныеЗаписи.Location,
	ВТ_ДетальныеЗаписи.SubSubSegment,
	ВТ_ДетальныеЗаписи.Account,
	ВТ_ДетальныеЗаписи.Currency,
	ВТ_ДетальныеЗаписи.AU,
	ВТ_ДетальныеЗаписи.ИдентификаторКлиента,
	ВТ_ДетальныеЗаписи.AmountОстаток,
	ВТ_ДетальныеЗаписи.BaseAmountОстаток,
	ВТ_ДетальныеЗаписи.ГоловнойКонтрагент,
	ВТ_ДетальныеЗаписи.Rate,
	ВТ_ДетальныеЗаписи.Status,
	ВТ_ДетальныеЗаписи.ConfirmedBy,
	ВТ_ДетальныеЗаписи.Comment,
	ВТ_ДетальныеЗаписи.ПредставлениеДокумента,
	ВТ_ДетальныеЗаписи.ForecastDate,
	ВТ_ДетальныеЗаписи.CustInputDate,
	ВТ_ДетальныеЗаписи.CustomerRepresentative,
	ВТ_ДетальныеЗаписи.CustomerInputDetails,
	ВТ_ДетальныеЗаписи.SLBAssignedTo,
	ВТ_ДетальныеЗаписи.RemedialWorkPlan,
	ВТ_ДетальныеЗаписи.RWDTargetDate,
	ВТ_ДетальныеЗаписи.InvoiceДатаВозвратаКС,
	ВТ_ДетальныеЗаписи.InvoiceДатаОтправкиКС,
	ВТ_ДетальныеЗаписи.InvoiceСтатусВозвратаКС,
	ВТ_ДетальныеЗаписи.InvoiceКомментарийСтатусаВозвратаКС,
	ВТ_ДетальныеЗаписи.Agreement,
	ВТ_ДетальныеЗаписи.InvoiceНомер,
	ВТ_ДетальныеЗаписи.InvoiceНомерДокумента,
	ВТ_ДетальныеЗаписи.InvoiceДата,
	ВТ_ДетальныеЗаписи.InvoiceFiscalInvoiceNo,
	ВТ_ДетальныеЗаписи.InvoiceFiscalInvoiceDate,
	ВТ_ДетальныеЗаписи.InvoiceAmount,
	ВТ_ДетальныеЗаписи.InvoiceContractTrigger,
	ВТ_ДетальныеЗаписи.InvoiceTriggerDate,
	ВТ_ДетальныеЗаписи.InvoiceContractPTDaysFrom,
	ВТ_ДетальныеЗаписи.InvoiceContractСрокОплаты,
	ВТ_ДетальныеЗаписи.InvoiceDueDateFrom,
	ВТ_ДетальныеЗаписи.InvoiceDueDateTo,
	ВТ_ДетальныеЗаписи.InvoiceStatusOfDispute,
	ВТ_ДетальныеЗаписи.InvoiceDisputeDistributedDate,
	ВТ_ДетальныеЗаписи.InvoiceDisputeCollectableDate,
	ВТ_ДетальныеЗаписи.InvoiceContractAmendmentName,
	ВТ_ДетальныеЗаписи.TransType,
	ВТ_ДетальныеЗаписи.Paid,
	ВТ_ДетальныеЗаписи.PaymentDate,
	ВТ_ДетальныеЗаписи.BrokenPromises,
	ВТ_ДетальныеЗаписи.EscalationSent,
	ВТ_ДетальныеЗаписи.LegalEntity,
	ВТ_ДетальныеЗаписи.USDAmount,
	ВЫБОР
		КОГДА ВТ_ДетальныеЗаписи.InvoiceDueDateFrom &lt;= &amp;Период
			ТОГДА ВТ_ДетальныеЗаписи.USDAmount
		ИНАЧЕ 0
	КОНЕЦ КАК DueFrom,
	ВЫБОР
		КОГДА ВТ_ДетальныеЗаписи.InvoiceDueDateTo &lt;= &amp;Период
			ТОГДА ВТ_ДетальныеЗаписи.USDAmount
		ИНАЧЕ 0
	КОНЕЦ КАК DueTo,
	ВЫБОР
		КОГДА ВТ_ДетальныеЗаписи.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.CustomerIsInsolventOrBankrupt)
			ТОГДА ВТ_ДетальныеЗаписи.USDAmount
		ИНАЧЕ 0
	КОНЕЦ КАК UnderLitigation,
	ВЫБОР
		КОГДА ВТ_ДетальныеЗаписи.ForecastDate = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ВТ_ДетальныеЗаписи.USDAmount
		ИНАЧЕ 0
	КОНЕЦ КАК NoFrcst,
	ВТ_ДетальныеЗаписи.Collector
ПОМЕСТИТЬ ВТ_РассчитанныеРесурсыУровень1
ИЗ
	ВТ_ДетальныеЗаписи КАК ВТ_ДетальныеЗаписи
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РассчитанныеРесурсыУровень1.Client,
	ВТ_РассчитанныеРесурсыУровень1.Company,
	ВТ_РассчитанныеРесурсыУровень1.Source,
	ВТ_РассчитанныеРесурсыУровень1.Location,
	ВТ_РассчитанныеРесурсыУровень1.SubSubSegment,
	ВТ_РассчитанныеРесурсыУровень1.Account,
	ВТ_РассчитанныеРесурсыУровень1.Currency,
	ВТ_РассчитанныеРесурсыУровень1.AU,
	ВТ_РассчитанныеРесурсыУровень1.ИдентификаторКлиента,
	ВТ_РассчитанныеРесурсыУровень1.AmountОстаток,
	ВТ_РассчитанныеРесурсыУровень1.BaseAmountОстаток,
	ВТ_РассчитанныеРесурсыУровень1.ГоловнойКонтрагент,
	ВТ_РассчитанныеРесурсыУровень1.Rate,
	ВТ_РассчитанныеРесурсыУровень1.Status,
	ВТ_РассчитанныеРесурсыУровень1.ConfirmedBy,
	ВТ_РассчитанныеРесурсыУровень1.Comment,
	ВТ_РассчитанныеРесурсыУровень1.ПредставлениеДокумента,
	ВТ_РассчитанныеРесурсыУровень1.ForecastDate,
	ВТ_РассчитанныеРесурсыУровень1.CustInputDate,
	ВТ_РассчитанныеРесурсыУровень1.CustomerRepresentative,
	ВТ_РассчитанныеРесурсыУровень1.CustomerInputDetails,
	ВТ_РассчитанныеРесурсыУровень1.SLBAssignedTo,
	ВТ_РассчитанныеРесурсыУровень1.RemedialWorkPlan,
	ВТ_РассчитанныеРесурсыУровень1.RWDTargetDate,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceДатаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceДатаОтправкиКС,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceСтатусВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceКомментарийСтатусаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень1.Agreement,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceНомер,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceНомерДокумента,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceДата,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceFiscalInvoiceNo,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceFiscalInvoiceDate,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceAmount,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceContractTrigger,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceTriggerDate,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceContractPTDaysFrom,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceContractСрокОплаты,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceDueDateFrom,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceDueDateTo,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceStatusOfDispute,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceDisputeDistributedDate,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceDisputeCollectableDate,
	ВТ_РассчитанныеРесурсыУровень1.InvoiceContractAmendmentName,
	ВТ_РассчитанныеРесурсыУровень1.TransType,
	ВТ_РассчитанныеРесурсыУровень1.Paid,
	ВТ_РассчитанныеРесурсыУровень1.PaymentDate,
	ВТ_РассчитанныеРесурсыУровень1.BrokenPromises,
	ВТ_РассчитанныеРесурсыУровень1.EscalationSent,
	ВТ_РассчитанныеРесурсыУровень1.LegalEntity,
	ВТ_РассчитанныеРесурсыУровень1.USDAmount,
	ВТ_РассчитанныеРесурсыУровень1.DueFrom,
	ВТ_РассчитанныеРесурсыУровень1.DueTo,
	ВТ_РассчитанныеРесурсыУровень1.UnderLitigation,
	ВТ_РассчитанныеРесурсыУровень1.NoFrcst,
	ВЫБОР
		КОГДА ВТ_РассчитанныеРесурсыУровень1.ForecastDate &lt;= &amp;Период
				И ВТ_РассчитанныеРесурсыУровень1.ForecastDate &lt;&gt; ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ВТ_РассчитанныеРесурсыУровень1.USDAmount - ВТ_РассчитанныеРесурсыУровень1.Paid
		ИНАЧЕ 0
	КОНЕЦ КАК FcstCollect,
	ВТ_РассчитанныеРесурсыУровень1.Collector
ПОМЕСТИТЬ ВТ_РассчитанныеРесурсыУровень2
ИЗ
	ВТ_РассчитанныеРесурсыУровень1 КАК ВТ_РассчитанныеРесурсыУровень1
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РассчитанныеРесурсыУровень2.Client,
	ВТ_РассчитанныеРесурсыУровень2.Company,
	ВТ_РассчитанныеРесурсыУровень2.Source,
	ВТ_РассчитанныеРесурсыУровень2.Location,
	ВТ_РассчитанныеРесурсыУровень2.SubSubSegment,
	ВТ_РассчитанныеРесурсыУровень2.Account,
	ВТ_РассчитанныеРесурсыУровень2.Currency,
	ВТ_РассчитанныеРесурсыУровень2.AU,
	ВТ_РассчитанныеРесурсыУровень2.ИдентификаторКлиента,
	ВТ_РассчитанныеРесурсыУровень2.AmountОстаток,
	ВТ_РассчитанныеРесурсыУровень2.BaseAmountОстаток,
	ВТ_РассчитанныеРесурсыУровень2.ГоловнойКонтрагент,
	ВТ_РассчитанныеРесурсыУровень2.Rate,
	ВТ_РассчитанныеРесурсыУровень2.Status,
	ВТ_РассчитанныеРесурсыУровень2.ConfirmedBy,
	ВТ_РассчитанныеРесурсыУровень2.Comment,
	ВТ_РассчитанныеРесурсыУровень2.ПредставлениеДокумента,
	ВТ_РассчитанныеРесурсыУровень2.ForecastDate,
	ВТ_РассчитанныеРесурсыУровень2.CustInputDate,
	ВТ_РассчитанныеРесурсыУровень2.CustomerRepresentative,
	ВТ_РассчитанныеРесурсыУровень2.CustomerInputDetails,
	ВТ_РассчитанныеРесурсыУровень2.SLBAssignedTo,
	ВТ_РассчитанныеРесурсыУровень2.RemedialWorkPlan,
	ВТ_РассчитанныеРесурсыУровень2.RWDTargetDate,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceДатаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceДатаОтправкиКС,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceСтатусВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceКомментарийСтатусаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень2.Agreement,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceНомер,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceНомерДокумента,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceДата,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceFiscalInvoiceNo,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceFiscalInvoiceDate,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceAmount,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceContractTrigger,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceTriggerDate,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceContractPTDaysFrom,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceContractСрокОплаты,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceDueDateFrom,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceDueDateTo,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceStatusOfDispute,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceDisputeDistributedDate,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceDisputeCollectableDate,
	ВТ_РассчитанныеРесурсыУровень2.InvoiceContractAmendmentName,
	ВТ_РассчитанныеРесурсыУровень2.TransType,
	ВТ_РассчитанныеРесурсыУровень2.Paid,
	ВТ_РассчитанныеРесурсыУровень2.PaymentDate,
	ВТ_РассчитанныеРесурсыУровень2.BrokenPromises,
	ВТ_РассчитанныеРесурсыУровень2.EscalationSent,
	ВТ_РассчитанныеРесурсыУровень2.LegalEntity,
	ВТ_РассчитанныеРесурсыУровень2.USDAmount,
	ВТ_РассчитанныеРесурсыУровень2.DueFrom,
	ВТ_РассчитанныеРесурсыУровень2.DueTo,
	ВТ_РассчитанныеРесурсыУровень2.UnderLitigation,
	ВТ_РассчитанныеРесурсыУровень2.NoFrcst,
	ВТ_РассчитанныеРесурсыУровень2.FcstCollect,
	ВЫБОР
		КОГДА ВТ_РассчитанныеРесурсыУровень2.Status В (ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.PendingSLBDocumentation), ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.Pricing), ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.TechnicalSQ), ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.LostInHole))
				И ВТ_РассчитанныеРесурсыУровень2.InvoiceDueDateFrom &lt;= &amp;Период
			ТОГДА ВТ_РассчитанныеРесурсыУровень2.USDAmount - ВТ_РассчитанныеРесурсыУровень2.Paid - ВТ_РассчитанныеРесурсыУровень2.FcstCollect
		ИНАЧЕ 0
	КОНЕЦ КАК OverdueDispute,
	ВТ_РассчитанныеРесурсыУровень2.Collector
ПОМЕСТИТЬ ВТ_РассчитанныеРесурсыУровень3
ИЗ
	ВТ_РассчитанныеРесурсыУровень2 КАК ВТ_РассчитанныеРесурсыУровень2
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РассчитанныеРесурсыУровень3.Client,
	ВТ_РассчитанныеРесурсыУровень3.Company,
	ВТ_РассчитанныеРесурсыУровень3.Source,
	ВТ_РассчитанныеРесурсыУровень3.Location,
	ВТ_РассчитанныеРесурсыУровень3.SubSubSegment,
	ВТ_РассчитанныеРесурсыУровень3.Account,
	ВТ_РассчитанныеРесурсыУровень3.Currency,
	ВТ_РассчитанныеРесурсыУровень3.AU,
	ВТ_РассчитанныеРесурсыУровень3.ИдентификаторКлиента,
	ВТ_РассчитанныеРесурсыУровень3.AmountОстаток,
	ВТ_РассчитанныеРесурсыУровень3.BaseAmountОстаток,
	ВТ_РассчитанныеРесурсыУровень3.ГоловнойКонтрагент,
	ВТ_РассчитанныеРесурсыУровень3.Rate,
	ВТ_РассчитанныеРесурсыУровень3.Status,
	ВТ_РассчитанныеРесурсыУровень3.ConfirmedBy,
	ВТ_РассчитанныеРесурсыУровень3.Comment,
	ВТ_РассчитанныеРесурсыУровень3.ПредставлениеДокумента,
	ВТ_РассчитанныеРесурсыУровень3.ForecastDate,
	ВТ_РассчитанныеРесурсыУровень3.CustInputDate,
	ВТ_РассчитанныеРесурсыУровень3.CustomerRepresentative,
	ВТ_РассчитанныеРесурсыУровень3.CustomerInputDetails,
	ВТ_РассчитанныеРесурсыУровень3.SLBAssignedTo,
	ВТ_РассчитанныеРесурсыУровень3.RemedialWorkPlan,
	ВТ_РассчитанныеРесурсыУровень3.RWDTargetDate,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceДатаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceДатаОтправкиКС,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceСтатусВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceКомментарийСтатусаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень3.Agreement,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceНомер,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceНомерДокумента,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceДата,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceFiscalInvoiceNo,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceFiscalInvoiceDate,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceAmount,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceContractTrigger,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceTriggerDate,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceContractPTDaysFrom,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceContractСрокОплаты,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceDueDateFrom,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceDueDateTo,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceStatusOfDispute,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceDisputeDistributedDate,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceDisputeCollectableDate,
	ВТ_РассчитанныеРесурсыУровень3.InvoiceContractAmendmentName,
	ВТ_РассчитанныеРесурсыУровень3.TransType,
	ВТ_РассчитанныеРесурсыУровень3.Paid,
	ВТ_РассчитанныеРесурсыУровень3.PaymentDate,
	ВТ_РассчитанныеРесурсыУровень3.BrokenPromises,
	ВТ_РассчитанныеРесурсыУровень3.EscalationSent,
	ВТ_РассчитанныеРесурсыУровень3.LegalEntity,
	ВТ_РассчитанныеРесурсыУровень3.USDAmount,
	ВТ_РассчитанныеРесурсыУровень3.DueFrom,
	ВТ_РассчитанныеРесурсыУровень3.DueTo,
	ВТ_РассчитанныеРесурсыУровень3.UnderLitigation,
	ВТ_РассчитанныеРесурсыУровень3.NoFrcst,
	ВТ_РассчитанныеРесурсыУровень3.FcstCollect,
	ВТ_РассчитанныеРесурсыУровень3.OverdueDispute,
	ВЫБОР
		КОГДА ВТ_РассчитанныеРесурсыУровень3.ForecastDate &lt;&gt; ДАТАВРЕМЯ(1, 1, 1)
				И ВТ_РассчитанныеРесурсыУровень3.DueTo &gt; ВТ_РассчитанныеРесурсыУровень3.FcstCollect
			ТОГДА ВТ_РассчитанныеРесурсыУровень3.USDAmount - ВТ_РассчитанныеРесурсыУровень3.FcstCollect - ВТ_РассчитанныеРесурсыУровень3.Paid - ВТ_РассчитанныеРесурсыУровень3.UnderLitigation - ВТ_РассчитанныеРесурсыУровень3.OverdueDispute
		ИНАЧЕ 0
	КОНЕЦ КАК OverdueNoFcst,
	ВТ_РассчитанныеРесурсыУровень3.Collector
ПОМЕСТИТЬ ВТ_РассчитанныеРесурсыУровень4
ИЗ
	ВТ_РассчитанныеРесурсыУровень3 КАК ВТ_РассчитанныеРесурсыУровень3
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РассчитанныеРесурсыУровень4.Client,
	ВТ_РассчитанныеРесурсыУровень4.Company,
	ВТ_РассчитанныеРесурсыУровень4.Source,
	ВТ_РассчитанныеРесурсыУровень4.Location,
	ВТ_РассчитанныеРесурсыУровень4.SubSubSegment,
	ВТ_РассчитанныеРесурсыУровень4.Account,
	ВТ_РассчитанныеРесурсыУровень4.Currency,
	ВТ_РассчитанныеРесурсыУровень4.AU,
	ВТ_РассчитанныеРесурсыУровень4.ИдентификаторКлиента,
	ВТ_РассчитанныеРесурсыУровень4.AmountОстаток,
	ВТ_РассчитанныеРесурсыУровень4.BaseAmountОстаток,
	ВТ_РассчитанныеРесурсыУровень4.ГоловнойКонтрагент,
	ВТ_РассчитанныеРесурсыУровень4.Rate,
	ВТ_РассчитанныеРесурсыУровень4.Status,
	ВТ_РассчитанныеРесурсыУровень4.ConfirmedBy,
	ВТ_РассчитанныеРесурсыУровень4.Comment,
	ВТ_РассчитанныеРесурсыУровень4.ПредставлениеДокумента,
	ВТ_РассчитанныеРесурсыУровень4.ForecastDate,
	ВТ_РассчитанныеРесурсыУровень4.CustInputDate,
	ВТ_РассчитанныеРесурсыУровень4.CustomerRepresentative,
	ВТ_РассчитанныеРесурсыУровень4.CustomerInputDetails,
	ВТ_РассчитанныеРесурсыУровень4.SLBAssignedTo,
	ВТ_РассчитанныеРесурсыУровень4.RemedialWorkPlan,
	ВТ_РассчитанныеРесурсыУровень4.RWDTargetDate,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceДатаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceДатаОтправкиКС,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceСтатусВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceКомментарийСтатусаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень4.Agreement,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceНомер,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceНомерДокумента,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceДата,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceFiscalInvoiceNo,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceFiscalInvoiceDate,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceAmount,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceContractTrigger,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceTriggerDate,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceContractPTDaysFrom,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceContractСрокОплаты,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceDueDateFrom,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceDueDateTo,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceStatusOfDispute,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceDisputeDistributedDate,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceDisputeCollectableDate,
	ВТ_РассчитанныеРесурсыУровень4.InvoiceContractAmendmentName,
	ВТ_РассчитанныеРесурсыУровень4.TransType,
	ВТ_РассчитанныеРесурсыУровень4.Paid,
	ВТ_РассчитанныеРесурсыУровень4.PaymentDate,
	ВТ_РассчитанныеРесурсыУровень4.BrokenPromises,
	ВТ_РассчитанныеРесурсыУровень4.EscalationSent,
	ВТ_РассчитанныеРесурсыУровень4.LegalEntity,
	ВТ_РассчитанныеРесурсыУровень4.USDAmount,
	ВТ_РассчитанныеРесурсыУровень4.DueFrom,
	ВТ_РассчитанныеРесурсыУровень4.DueTo,
	ВТ_РассчитанныеРесурсыУровень4.UnderLitigation,
	ВТ_РассчитанныеРесурсыУровень4.NoFrcst,
	ВТ_РассчитанныеРесурсыУровень4.FcstCollect,
	ВТ_РассчитанныеРесурсыУровень4.OverdueDispute,
	ВТ_РассчитанныеРесурсыУровень4.OverdueNoFcst,
	ВЫБОР
		КОГДА ВТ_РассчитанныеРесурсыУровень4.ForecastDate &lt;&gt; ДАТАВРЕМЯ(1, 1, 1)
				И ВТ_РассчитанныеРесурсыУровень4.DueFrom &gt; ВТ_РассчитанныеРесурсыУровень4.FcstCollect
			ТОГДА ВТ_РассчитанныеРесурсыУровень4.USDAmount - ВТ_РассчитанныеРесурсыУровень4.FcstCollect - ВТ_РассчитанныеРесурсыУровень4.OverdueNoFcst - ВТ_РассчитанныеРесурсыУровень4.Paid - ВТ_РассчитанныеРесурсыУровень4.UnderLitigation - ВТ_РассчитанныеРесурсыУровень4.OverdueDispute
		ИНАЧЕ 0
	КОНЕЦ КАК InRangeNoColl,
	ВТ_РассчитанныеРесурсыУровень4.Collector
ПОМЕСТИТЬ ВТ_РассчитанныеРесурсыУровень5
ИЗ
	ВТ_РассчитанныеРесурсыУровень4 КАК ВТ_РассчитанныеРесурсыУровень4
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РассчитанныеРесурсыУровень5.Client,
	ВТ_РассчитанныеРесурсыУровень5.Company,
	ВТ_РассчитанныеРесурсыУровень5.Source,
	ВТ_РассчитанныеРесурсыУровень5.Location,
	ВТ_РассчитанныеРесурсыУровень5.SubSubSegment,
	ВТ_РассчитанныеРесурсыУровень5.Account,
	ВТ_РассчитанныеРесурсыУровень5.Currency,
	ВТ_РассчитанныеРесурсыУровень5.AU,
	ВТ_РассчитанныеРесурсыУровень5.ИдентификаторКлиента,
	ВТ_РассчитанныеРесурсыУровень5.AmountОстаток,
	ВТ_РассчитанныеРесурсыУровень5.BaseAmountОстаток,
	ВТ_РассчитанныеРесурсыУровень5.ГоловнойКонтрагент,
	ВТ_РассчитанныеРесурсыУровень5.Rate,
	ВТ_РассчитанныеРесурсыУровень5.Status,
	ВТ_РассчитанныеРесурсыУровень5.ConfirmedBy,
	ВТ_РассчитанныеРесурсыУровень5.Comment,
	ВТ_РассчитанныеРесурсыУровень5.ПредставлениеДокумента,
	ВТ_РассчитанныеРесурсыУровень5.ForecastDate,
	ВТ_РассчитанныеРесурсыУровень5.CustInputDate,
	ВТ_РассчитанныеРесурсыУровень5.CustomerRepresentative,
	ВТ_РассчитанныеРесурсыУровень5.CustomerInputDetails,
	ВТ_РассчитанныеРесурсыУровень5.SLBAssignedTo,
	ВТ_РассчитанныеРесурсыУровень5.RemedialWorkPlan,
	ВТ_РассчитанныеРесурсыУровень5.RWDTargetDate,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceДатаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceДатаОтправкиКС,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceСтатусВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceКомментарийСтатусаВозвратаКС,
	ВТ_РассчитанныеРесурсыУровень5.Agreement,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceНомер,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceНомерДокумента,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceДата,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceFiscalInvoiceNo,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceFiscalInvoiceDate,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceAmount,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceContractTrigger,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceTriggerDate,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceContractPTDaysFrom,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceContractСрокОплаты,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceDueDateFrom,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceDueDateTo,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceStatusOfDispute,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceDisputeDistributedDate,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceDisputeCollectableDate,
	ВТ_РассчитанныеРесурсыУровень5.InvoiceContractAmendmentName,
	ВТ_РассчитанныеРесурсыУровень5.TransType,
	ВТ_РассчитанныеРесурсыУровень5.Paid,
	ВТ_РассчитанныеРесурсыУровень5.PaymentDate,
	ВТ_РассчитанныеРесурсыУровень5.BrokenPromises,
	ВТ_РассчитанныеРесурсыУровень5.EscalationSent,
	ВТ_РассчитанныеРесурсыУровень5.LegalEntity,
	ВТ_РассчитанныеРесурсыУровень5.USDAmount,
	ВТ_РассчитанныеРесурсыУровень5.DueFrom,
	ВТ_РассчитанныеРесурсыУровень5.DueTo,
	ВТ_РассчитанныеРесурсыУровень5.UnderLitigation,
	ВТ_РассчитанныеРесурсыУровень5.NoFrcst,
	ВТ_РассчитанныеРесурсыУровень5.FcstCollect,
	ВТ_РассчитанныеРесурсыУровень5.OverdueDispute,
	ВТ_РассчитанныеРесурсыУровень5.OverdueNoFcst,
	ВТ_РассчитанныеРесурсыУровень5.InRangeNoColl,
	ВЫБОР
		КОГДА ВТ_РассчитанныеРесурсыУровень5.ForecastDate = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА 0
		ИНАЧЕ ВТ_РассчитанныеРесурсыУровень5.USDAmount - ВТ_РассчитанныеРесурсыУровень5.Paid - ВТ_РассчитанныеРесурсыУровень5.FcstCollect - ВТ_РассчитанныеРесурсыУровень5.InRangeNoColl - ВТ_РассчитанныеРесурсыУровень5.OverdueDispute - ВТ_РассчитанныеРесурсыУровень5.OverdueNoFcst - ВТ_РассчитанныеРесурсыУровень5.UnderLitigation
	КОНЕЦ КАК NotDue,
	ВТ_РассчитанныеРесурсыУровень5.Collector
ИЗ
	ВТ_РассчитанныеРесурсыУровень5 КАК ВТ_РассчитанныеРесурсыУровень5</query>
	</dataSet>
	<calculatedField>
		<dataPath>BaseAmountОстатокМодуль</dataPath>
		<expression>Выбор Когда BaseAmountОстаток &gt; 0 Тогда BaseAmountОстаток Иначе -BaseAmountОстаток Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>BaseAmountОстатокМодуль</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Period</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<inputParameters>
			<dcscor:item>
				<dcscor:parameter>ФорматРедактирования</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ДФ=MM/dd/yyyy</dcscor:value>
			</dcscor:item>
		</inputParameters>
	</parameter>
	<parameter>
		<name>ПериодОстатков</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период остатков</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>НачалоПериода(&amp;Период,"МЕСЯЦ") </expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецДняФормированияОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец дня формирования отчета</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(&amp;Период,"ДЕНЬ")</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ТекущаяДата</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущая дата</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(ТекущаяДата(), "ДЕНЬ")</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецМесяцаФормированияОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец месяца формирования отчета</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(&amp;Период,"МЕСЯЦ")</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>USD</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>USD</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Валюты</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>Константы.rgsВалютаUSD.Получить()</expression>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Основной</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Company.Наименование</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Company</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>LegalEntity</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Source</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Location.БазовыйЭлемент.GeoMarket.Родитель</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Geo Market</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Location.БазовыйЭлемент.GeoMarket</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Sub Geo Market</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>SubSubSegment.БазовыйЭлемент.Родитель.Родитель</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Segment</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ИдентификаторКлиента</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Customer ID</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Client.CRMID</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>CRM ID</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Client</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ГоловнойКонтрагент</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Corporate</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Collector</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Collector</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Account</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>AU</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>TransType</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceНомер</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Invoice No</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceДата</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceFiscalInvoiceNo</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Fiscal invoice number</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceFiscalInvoiceDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Fiscal invoice date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Currency</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Invoice / Transaction Amount</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>InvoiceAmount</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Amount</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Remaining Amount</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>AmountОстаток</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Amount</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>USDAmount</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Rate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Rate</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Agreement</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Agreement</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractAmendmentName</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Additional agreement/Work order</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractTrigger</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Trigger</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceДатаОтправкиКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Departure date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceДатаВозвратаКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Return date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceTriggerDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Trigger date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractPTDaysFrom</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>PT From</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractСрокОплаты</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>PT To</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDueDateFrom</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Date From</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDueDateTo</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Date To</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>DueFrom</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>DueTo</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Status</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Status</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ConfirmedBy</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Confirmed By</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ForecastDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Forecast Date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>PaymentDate</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Paid</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>FcstCollect</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InRangeNoColl</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>OverdueDispute</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>OverdueNoFcst</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>NotDue</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>NoFrcst</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>UnderLitigation</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Under Litigation</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustInputDate</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustomerRepresentative</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustomerInputDetails</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>SLBAssignedTo</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Assigned To</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RemedialWorkPlan</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RWDTargetDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>RWD Deadline</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceStatusOfDispute</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Status of dispute</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDisputeDistributedDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Dispute Distributed date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDisputeCollectableDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Dispute Collectable date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceКомментарийСтатусаВозвратаКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Comment return status</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceСтатусВозвратаКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Return status</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>BrokenPromises</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>EscalationSent</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Source</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>a775f9fe-a968-47fc-a695-0791acdd4a9f</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">BaseAmountОстатокМодуль</dcsset:left>
					<dcsset:comparisonType>GreaterOrEqual</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:decimal">1</dcsset:right>
					<dcsset:userSettingID>ae204ac2-e755-4e99-8612-94c63e0a17bf</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Remaining USD Amount</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardBeginningDate">
						<v8:variant xsi:type="v8:StandardBeginningDateVariant">BeginningOfNextDay</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>6a13f980-6f34-4eea-91c0-a7e9314c4df5</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>КонецМесяцаФормированияОтчета</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле1</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле2</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле3</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Формат</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>ЧДЦ=2; ДФ=ДФ=MM/dd/yyyy</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>InvoiceДата</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Формат</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>ДФ=MM/dd/yyyy</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МакетОформления</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">Море</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionAttributesPlacement">Separately</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>