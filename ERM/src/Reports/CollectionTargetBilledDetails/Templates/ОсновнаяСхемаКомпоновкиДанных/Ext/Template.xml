<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Client</dataPath>
			<field>Client</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>SubSubSegment</dataPath>
			<field>SubSubSegment</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>AU</dataPath>
			<field>AU</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Source</dataPath>
			<field>Source</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Currency</dataPath>
			<field>Currency</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Invoice</dataPath>
			<field>Invoice</field>
			<presentationExpression>ПредставлениеДокумента</presentationExpression>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>BaseAmountОстаток</dataPath>
			<field>BaseAmountОстаток</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>AmountОстаток</dataPath>
			<field>AmountОстаток</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Account</dataPath>
			<field>Account</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Company</dataPath>
			<field>Company</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Location</dataPath>
			<field>Location</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИдентификаторКлиента</dataPath>
			<field>ИдентификаторКлиента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Идентификатор клиента</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГоловнойКонтрагент</dataPath>
			<field>ГоловнойКонтрагент</field>
			<inputParameters>
				<dcscor:item>
					<dcscor:parameter>ПараметрыВыбора</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:ChoiceParameters">
						<dcscor:item>
							<dcscor:choiceParameter>Отбор.ParentClient</dcscor:choiceParameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item>
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ФормаВыбора</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ФормаВыбора</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Memo</dataPath>
			<field>Memo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Rate</dataPath>
			<field>Rate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Rate</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=10; ЧДЦ=4</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Status</dataPath>
			<field>Status</field>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ГоризонтальноеПоложение</dcscor:parameter>
					<dcscor:value xsi:type="v8ui:HorizontalAlign">Justify</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПредставлениеДокумента</dataPath>
			<field>ПредставлениеДокумента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Представление документа</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ForecastDate</dataPath>
			<field>ForecastDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>SLBAssignedTo</dataPath>
			<field>SLBAssignedTo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceДатаОтправкиКС</dataPath>
			<field>InvoiceДатаОтправкиКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceДатаВозвратаКС</dataPath>
			<field>InvoiceДатаВозвратаКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceСтатусВозвратаКС</dataPath>
			<field>InvoiceСтатусВозвратаКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceКомментарийСтатусаВозвратаКС</dataPath>
			<field>InvoiceКомментарийСтатусаВозвратаКС</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Collector</dataPath>
			<field>Collector</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Agreement</dataPath>
			<field>Agreement</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Agreement</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceНомер</dataPath>
			<field>InvoiceНомер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Invoice номер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceНомерДокумента</dataPath>
			<field>InvoiceНомерДокумента</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Invoice номер документа</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceStatusOfDispute</dataPath>
			<field>InvoiceStatusOfDispute</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceAmount</dataPath>
			<field>InvoiceAmount</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceTriggerDate</dataPath>
			<field>InvoiceTriggerDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractTrigger</dataPath>
			<field>InvoiceContractTrigger</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDisputeCollectableDate</dataPath>
			<field>InvoiceDisputeCollectableDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDueDateFrom</dataPath>
			<field>InvoiceDueDateFrom</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractPTDaysFrom</dataPath>
			<field>InvoiceContractPTDaysFrom</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractСрокОплаты</dataPath>
			<field>InvoiceContractСрокОплаты</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDueDateTo</dataPath>
			<field>InvoiceDueDateTo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceDisputeDistributedDate</dataPath>
			<field>InvoiceDisputeDistributedDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceДата</dataPath>
			<field>InvoiceДата</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceFiscalInvoiceNo</dataPath>
			<field>InvoiceFiscalInvoiceNo</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceFiscalInvoiceDate</dataPath>
			<field>InvoiceFiscalInvoiceDate</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>InvoiceContractAmendmentName</dataPath>
			<field>InvoiceContractAmendmentName</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CashBatch</dataPath>
			<field>CashBatch</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>TransType</dataPath>
			<field>TransType</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Trans type</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Paid</dataPath>
			<field>Paid</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Paid</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>PaymentDate</dataPath>
			<field>PaymentDate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Payment date</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=MM/dd/yy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Comment</dataPath>
			<field>Comment</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Comment</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ConfirmedBy</dataPath>
			<field>ConfirmedBy</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Confirmed by</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustInputDate</dataPath>
			<field>CustInputDate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Cust input date</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RWDTargetDate</dataPath>
			<field>RWDTargetDate</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>RWDTarget date</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustomerRepresentative</dataPath>
			<field>CustomerRepresentative</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Customer representative</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>RemedialWorkPlan</dataPath>
			<field>RemedialWorkPlan</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Remedial work plan</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustomerInputDetails</dataPath>
			<field>CustomerInputDetails</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Customer input details</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>BrokenPromises</dataPath>
			<field>BrokenPromises</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Broken promises</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>EscalationSent</dataPath>
			<field>EscalationSent</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Escalation sent</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>LegalEntity</dataPath>
			<field>LegalEntity</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>UID</dataPath>
			<field>UID</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>UID</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>CustUName</dataPath>
			<field>CustUName</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>CustUName</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	BilledARОстатки.Client КАК Client,
	BilledARОстатки.Company КАК Company,
	BilledARОстатки.Source КАК Source,
	BilledARОстатки.Location КАК Location,
	BilledARОстатки.SubSubSegment КАК SubSubSegment,
	BilledARОстатки.Invoice КАК Invoice,
	BilledARОстатки.Account,
	BilledARОстатки.Currency КАК Currency,
	BilledARОстатки.AU КАК AU,
	BilledARОстатки.AmountОстаток,
	ВЫБОР
		КОГДА BilledARОстатки.Invoice ССЫЛКА Документ.Invoice
			ТОГДА ВЫРАЗИТЬ(BilledARОстатки.Invoice КАК Документ.Invoice).DocNumber
		ИНАЧЕ ВЫРАЗИТЬ(BilledARОстатки.Invoice КАК Документ.Memo).Номер
	КОНЕЦ КАК ПредставлениеДокумента,
	BilledARОстатки.LegalEntity
ПОМЕСТИТЬ ВТ_Остатки
ИЗ
	РегистрНакопления.BilledAR.Остатки({(&amp;ПериодОстатков)}, ) КАК BilledARОстатки

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	UnallocatedMemoОстатки.Client,
	UnallocatedMemoОстатки.Company,
	UnallocatedMemoОстатки.Source,
	UnallocatedMemoОстатки.Location,
	UnallocatedMemoОстатки.SubSubSegment,
	UnallocatedMemoОстатки.Memo,
	UnallocatedMemoОстатки.Account,
	UnallocatedMemoОстатки.Currency,
	UnallocatedMemoОстатки.AU,
	UnallocatedMemoОстатки.AmountОстаток,
	UnallocatedMemoОстатки.Memo.Номер,
	UnallocatedMemoОстатки.LegalEntity
ИЗ
	РегистрНакопления.UnallocatedMemo.Остатки({(&amp;ПериодОстатков)}, ) КАК UnallocatedMemoОстатки

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	BilledARОбороты.Client КАК Client,
	BilledARОбороты.Company КАК Company,
	BilledARОбороты.Source КАК Source,
	BilledARОбороты.Location КАК Location,
	BilledARОбороты.SubSubSegment КАК SubSubSegment,
	BilledARОбороты.Invoice КАК Invoice,
	BilledARОбороты.Account,
	BilledARОбороты.Currency КАК Currency,
	BilledARОбороты.AU КАК AU,
	BilledARОбороты.AmountОборот,
	ВЫБОР
		КОГДА BilledARОбороты.Invoice ССЫЛКА Документ.Invoice
			ТОГДА ВЫРАЗИТЬ(BilledARОбороты.Invoice КАК Документ.Invoice).DocNumber
		ИНАЧЕ ВЫРАЗИТЬ(BilledARОбороты.Invoice КАК Документ.Memo).Номер
	КОНЕЦ КАК ПредставлениеДокумента,
	BilledARОбороты.LegalEntity
ПОМЕСТИТЬ ВТ_Обороты
ИЗ
	РегистрНакопления.BilledAR.Обороты({(&amp;ПериодОстатков)}, {(&amp;КонецДняФормированияОтчета)}, , ) КАК BilledARОбороты

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	UnallocatedMemoОбороты.Client,
	UnallocatedMemoОбороты.Company,
	UnallocatedMemoОбороты.Source,
	UnallocatedMemoОбороты.Location,
	UnallocatedMemoОбороты.SubSubSegment,
	UnallocatedMemoОбороты.Memo,
	UnallocatedMemoОбороты.Account,
	UnallocatedMemoОбороты.Currency,
	UnallocatedMemoОбороты.AU,
	UnallocatedMemoОбороты.AmountОборот,
	UnallocatedMemoОбороты.Memo.Номер,
	UnallocatedMemoОбороты.LegalEntity
ИЗ
	РегистрНакопления.UnallocatedMemo.Обороты({(&amp;ПериодОстатков)}, {(&amp;КонецДняФормированияОтчета)}, , ) КАК UnallocatedMemoОбороты

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	PaymentsОбороты.Client КАК Client,
	PaymentsОбороты.Company КАК Company,
	PaymentsОбороты.Source КАК Source,
	PaymentsОбороты.Location КАК Location,
	PaymentsОбороты.SubSubSegment КАК SubSubSegment,
	PaymentsОбороты.Invoice КАК Invoice,
	PaymentsОбороты.Currency КАК Currency,
	PaymentsОбороты.AU КАК AU,
	PaymentsОбороты.AmountОборот КАК AmountОборот,
	PaymentsОбороты.LegalEntity
ПОМЕСТИТЬ ВТ_ОплатыТекущегоПериода
ИЗ
	РегистрНакопления.Payments.Обороты(
			{(&amp;ПериодОстатков)},
			{(&amp;КонецДняФормированияОтчета)},
			,
			(Client, Company, Source, Location, SubSubSegment, Invoice, Currency, AU, LegalEntity) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ВТ_Обороты.Client,
					ВТ_Обороты.Company,
					ВТ_Обороты.Source,
					ВТ_Обороты.Location,
					ВТ_Обороты.SubSubSegment,
					ВТ_Обороты.Invoice,
					ВТ_Обороты.Currency,
					ВТ_Обороты.AU,
					ВТ_Обороты.LegalEntity
				ИЗ
					ВТ_Обороты КАК ВТ_Обороты
				ГДЕ
					ВТ_Обороты.Invoice ССЫЛКА Документ.Invoice)) КАК PaymentsОбороты

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Обороты.Client,
	ВТ_Обороты.Company,
	ВТ_Обороты.Source,
	ВТ_Обороты.Location,
	ВТ_Обороты.SubSubSegment,
	ВТ_Обороты.Invoice,
	ВТ_Обороты.Account,
	ВТ_Обороты.Currency,
	ВТ_Обороты.AU,
	ВТ_Обороты.AmountОборот + ЕСТЬNULL(ВТ_Оплаты.AmountОборот, 0) КАК AmountОстаток,
	ВТ_Обороты.ПредставлениеДокумента,
	ВТ_Обороты.LegalEntity
ПОМЕСТИТЬ ВТ_ОборотыБезОплат
ИЗ
	ВТ_Обороты КАК ВТ_Обороты
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОплатыТекущегоПериода КАК ВТ_Оплаты
		ПО ВТ_Обороты.Client = ВТ_Оплаты.Client
			И ВТ_Обороты.Company = ВТ_Оплаты.Company
			И ВТ_Обороты.Source = ВТ_Оплаты.Source
			И ВТ_Обороты.Location = ВТ_Оплаты.Location
			И ВТ_Обороты.SubSubSegment = ВТ_Оплаты.SubSubSegment
			И ВТ_Обороты.Invoice = ВТ_Оплаты.Invoice
			И ВТ_Обороты.Currency = ВТ_Оплаты.Currency
			И ВТ_Обороты.AU = ВТ_Оплаты.AU
			И ВТ_Обороты.LegalEntity = ВТ_Оплаты.LegalEntity
ГДЕ
	ВТ_Обороты.AmountОборот + ЕСТЬNULL(ВТ_Оплаты.AmountОборот, 0) &lt;&gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос.Client КАК Client,
	ВложенныйЗапрос.Company,
	ВложенныйЗапрос.Source КАК Source,
	ВложенныйЗапрос.Location,
	ВложенныйЗапрос.SubSubSegment,
	ВложенныйЗапрос.Invoice,
	ВложенныйЗапрос.Account,
	ВложенныйЗапрос.Currency,
	ВложенныйЗапрос.AU,
	СУММА(ВложенныйЗапрос.AmountОстаток) КАК AmountОстаток,
	ВложенныйЗапрос.ПредставлениеДокумента,
	ВложенныйЗапрос.LegalEntity
ПОМЕСТИТЬ ВТ_ОстаткиБезОплатТекущегоПериода
ИЗ
	(ВЫБРАТЬ
		ВТ_Остатки.Client КАК Client,
		ВТ_Остатки.Company КАК Company,
		ВТ_Остатки.Source КАК Source,
		ВТ_Остатки.Location КАК Location,
		ВТ_Остатки.SubSubSegment КАК SubSubSegment,
		ВТ_Остатки.Invoice КАК Invoice,
		ВТ_Остатки.Account КАК Account,
		ВТ_Остатки.Currency КАК Currency,
		ВТ_Остатки.AU КАК AU,
		ВТ_Остатки.AmountОстаток КАК AmountОстаток,
		ВТ_Остатки.ПредставлениеДокумента КАК ПредставлениеДокумента,
		ВТ_Остатки.LegalEntity КАК LegalEntity
	ИЗ
		ВТ_Остатки КАК ВТ_Остатки
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ВТ_ОборотыБезОплат.Client,
		ВТ_ОборотыБезОплат.Company,
		ВТ_ОборотыБезОплат.Source,
		ВТ_ОборотыБезОплат.Location,
		ВТ_ОборотыБезОплат.SubSubSegment,
		ВТ_ОборотыБезОплат.Invoice,
		ВТ_ОборотыБезОплат.Account,
		ВТ_ОборотыБезОплат.Currency,
		ВТ_ОборотыБезОплат.AU,
		ВТ_ОборотыБезОплат.AmountОстаток,
		ВТ_ОборотыБезОплат.ПредставлениеДокумента,
		ВТ_ОборотыБезОплат.LegalEntity
	ИЗ
		ВТ_ОборотыБезОплат КАК ВТ_ОборотыБезОплат) КАК ВложенныйЗапрос

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.Client,
	ВложенныйЗапрос.Company,
	ВложенныйЗапрос.Source,
	ВложенныйЗапрос.Location,
	ВложенныйЗапрос.SubSubSegment,
	ВложенныйЗапрос.Invoice,
	ВложенныйЗапрос.Account,
	ВложенныйЗапрос.Currency,
	ВложенныйЗапрос.AU,
	ВложенныйЗапрос.ПредставлениеДокумента,
	ВложенныйЗапрос.LegalEntity

ИНДЕКСИРОВАТЬ ПО
	Client,
	Source
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	PaymentsОбороты.Client КАК Client,
	PaymentsОбороты.Company КАК Company,
	PaymentsОбороты.Source КАК Source,
	PaymentsОбороты.Location КАК Location,
	PaymentsОбороты.SubSubSegment КАК SubSubSegment,
	PaymentsОбороты.Invoice КАК Invoice,
	PaymentsОбороты.Currency КАК Currency,
	PaymentsОбороты.AU КАК AU,
	СУММА(PaymentsОбороты.AmountОборот) КАК Paid,
	МАКСИМУМ(ВЫБОР
			КОГДА PaymentsОбороты.Регистратор ССЫЛКА Документ.ПроводкаDSS
				ТОГДА PaymentsОбороты.Регистратор.DateLawson
			ИНАЧЕ PaymentsОбороты.Регистратор.Дата
		КОНЕЦ) КАК PaymentDate,
	PaymentsОбороты.LegalEntity
ПОМЕСТИТЬ ВТ_ОплатыПоПроводкам
ИЗ
	РегистрНакопления.Payments.Обороты(
			{(&amp;ПериодНачалаАнализаОплат)},
			{(&amp;КонецДняФормированияОтчета)},
			Регистратор,
			(Client, Company, Source, Location, SubSubSegment, Invoice, Currency, AU, LegalEntity) В
				(ВЫБРАТЬ РАЗЛИЧНЫЕ
					ВТ_ОстаткиБезОплатТекущегоПериода.Client,
					ВТ_ОстаткиБезОплатТекущегоПериода.Company,
					ВТ_ОстаткиБезОплатТекущегоПериода.Source,
					ВТ_ОстаткиБезОплатТекущегоПериода.Location,
					ВТ_ОстаткиБезОплатТекущегоПериода.SubSubSegment,
					ВТ_ОстаткиБезОплатТекущегоПериода.Invoice,
					ВТ_ОстаткиБезОплатТекущегоПериода.Currency,
					ВТ_ОстаткиБезОплатТекущегоПериода.AU,
					ВТ_ОстаткиБезОплатТекущегоПериода.LegalEntity
				ИЗ
					ВТ_ОстаткиБезОплатТекущегоПериода КАК ВТ_ОстаткиБезОплатТекущегоПериода
						ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ИсточникиСЗаполнениемОплатИзОбмена КАК ИсточникиСЗаполнениемОплатИзОбмена
						ПО
							ВТ_ОстаткиБезОплатТекущегоПериода.Source = ИсточникиСЗаполнениемОплатИзОбмена.Source
								И (ВТ_ОстаткиБезОплатТекущегоПериода.Company = ИсточникиСЗаполнениемОплатИзОбмена.Company
									ИЛИ ИсточникиСЗаполнениемОплатИзОбмена.Company = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))
				ГДЕ
					ВТ_ОстаткиБезОплатТекущегоПериода.Invoice ССЫЛКА Документ.Invoice
					И ИсточникиСЗаполнениемОплатИзОбмена.Source ЕСТЬ NULL )) КАК PaymentsОбороты

СГРУППИРОВАТЬ ПО
	PaymentsОбороты.Client,
	PaymentsОбороты.Company,
	PaymentsОбороты.Source,
	PaymentsОбороты.Location,
	PaymentsОбороты.SubSubSegment,
	PaymentsОбороты.Invoice,
	PaymentsОбороты.Currency,
	PaymentsОбороты.AU,
	PaymentsОбороты.LegalEntity

ИНДЕКСИРОВАТЬ ПО
	Invoice,
	Client,
	Company,
	Source,
	Location,
	SubSubSegment,
	Currency,
	AU
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	FiscalPayments.Source,
	FiscalPayments.Company,
	FiscalPayments.Invoice,
	FiscalPayments.Currency,
	СУММА(FiscalPayments.Amount) КАК Paid,
	МАКСИМУМ(FiscalPayments.PaymentDate) КАК PaymentDate,
	FiscalPayments.SettlementAmount
ПОМЕСТИТЬ ВТ_ОплатыИзОбмена
ИЗ
	РегистрСведений.FiscalPayments КАК FiscalPayments
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ИсточникиСЗаполнениемОплатИзОбмена КАК ИсточникиСЗаполнениемОплатИзОбмена
		ПО FiscalPayments.Source = ИсточникиСЗаполнениемОплатИзОбмена.Source
			И (FiscalPayments.Company = ИсточникиСЗаполнениемОплатИзОбмена.Company
				ИЛИ ИсточникиСЗаполнениемОплатИзОбмена.Company = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))
ГДЕ
	FiscalPayments.PaymentDate &lt;= &amp;КонецДняФормированияОтчета

СГРУППИРОВАТЬ ПО
	FiscalPayments.Invoice,
	FiscalPayments.Currency,
	FiscalPayments.Source,
	FiscalPayments.Company,
	FiscalPayments.SettlementAmount
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИерархияКонтрагентовСрезПоследних.Контрагент КАК Контрагент,
	ИерархияКонтрагентовСрезПоследних.ГоловнойКонтрагент
ПОМЕСТИТЬ ВТ_ИерархияКлиентов
ИЗ
	РегистрСведений.ИерархияКонтрагентов.СрезПоследних(
			,
			Контрагент В
				(ВЫБРАТЬ
					ВТ_ОстаткиБезОплатТекущегоПериода.Client
				ИЗ
					ВТ_ОстаткиБезОплатТекущегоПериода КАК ВТ_ОстаткиБезОплатТекущегоПериода)) КАК ИерархияКонтрагентовСрезПоследних

ИНДЕКСИРОВАТЬ ПО
	Контрагент
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_Остатки.Client,
	ВТ_Остатки.Company,
	ВТ_Остатки.Source,
	ВТ_Остатки.Location,
	ВТ_Остатки.SubSubSegment,
	ВТ_Остатки.Account,
	ВТ_Остатки.Currency,
	ВТ_Остатки.AU,
	ВТ_Остатки.Invoice.ClientID КАК ИдентификаторКлиента,
	СУММА(ВТ_Остатки.AmountОстаток) КАК AmountОстаток,
	СУММА(ВЫБОР
			КОГДА ВнутренниеКурсыВалютСрезПоследних.Курс ЕСТЬ NULL 
					ИЛИ ВнутренниеКурсыВалютСрезПоследних.Курс = 0
				ТОГДА 0
			ИНАЧЕ ВТ_Остатки.AmountОстаток / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность
		КОНЕЦ) КАК BaseAmountОстаток,
	ВТ_ИерархияКлиентов.ГоловнойКонтрагент,
	ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0) КАК Rate,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice.DueDateTo &lt;= &amp;Период
				И InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)
		ИНАЧЕ InvoiceCommentsСрезПоследних.Problem.Status
	КОНЕЦ КАК Status,
	InvoiceCommentsСрезПоследних.Problem.ConfirmedBy КАК ConfirmedBy,
	InvoiceCommentsСрезПоследних.Problem.Comment КАК Comment,
	ВТ_Остатки.ПредставлениеДокумента,
	ВЫБОР
		КОГДА InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ВТ_Остатки.Invoice.DueDateTo
		ИНАЧЕ ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1))
	КОНЕЦ КАК ForecastDate,
	InvoiceCommentsСрезПоследних.Problem.CustInputDate КАК CustInputDate,
	InvoiceCommentsСрезПоследних.Problem.CustomerRepresentative КАК CustomerRepresentative,
	InvoiceCommentsСрезПоследних.Problem.CustomerInputDetails КАК CustomerInputDetails,
	InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList КАК SLBAssignedTo,
	InvoiceCommentsСрезПоследних.Problem.RemedialWorkPlan КАК RemedialWorkPlan,
	InvoiceCommentsСрезПоследних.Problem.RWDTargetDate КАК RWDTargetDate,
	ВТ_Остатки.Invoice.ДатаВозвратаКС,
	ВТ_Остатки.Invoice.ДатаОтправкиКС,
	ВТ_Остатки.Invoice.СтатусВозвратаКС,
	ВТ_Остатки.Invoice.КомментарийСтатусаВозвратаКС,
	Collectors.Collector,
	ВЫБОР
		КОГДА ВТ_Остатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.Radius)
			ТОГДА ВТ_Остатки.Invoice.Agreement
		ИНАЧЕ ВТ_Остатки.Invoice.Contract.crmContractName
	КОНЕЦ КАК Agreement,
	ВЫБОР
		КОГДА ВТ_Остатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.OracleMI)
				И ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
				И ВТ_Остатки.Invoice.FiscalInvoiceNo &lt;&gt; ""
			ТОГДА ВТ_Остатки.Invoice.FiscalInvoiceNo
		ИНАЧЕ ВТ_Остатки.ПредставлениеДокумента
	КОНЕЦ КАК InvoiceНомер,
	ВТ_Остатки.Invoice.Номер КАК InvoiceНомерДокумента,
	ВТ_Остатки.Invoice.Дата КАК InvoiceДата,
	ВТ_Остатки.Invoice.FiscalInvoiceNo КАК InvoiceFiscalInvoiceNo,
	ВТ_Остатки.Invoice.FiscalInvoiceDate КАК InvoiceFiscalInvoiceDate,
	СУММА(ВТ_Остатки.Invoice.Amount) КАК InvoiceAmount,
	ВТ_Остатки.Invoice.Contract.Trigger КАК InvoiceContractTrigger,
	ВТ_Остатки.Invoice.TriggerDate КАК InvoiceTriggerDate,
	ВТ_Остатки.Invoice.Contract.PTDaysFrom КАК InvoiceContractPTDaysFrom,
	ВТ_Остатки.Invoice.Contract.СрокОплаты КАК InvoiceContractСрокОплаты,
	ВТ_Остатки.Invoice.DueDateFrom КАК InvoiceDueDateFrom,
	ВТ_Остатки.Invoice.DueDateTo КАК InvoiceDueDateTo,
	ВТ_Остатки.Invoice.StatusOfDispute КАК InvoiceStatusOfDispute,
	ВТ_Остатки.Invoice.DisputeDistributedDate КАК InvoiceDisputeDistributedDate,
	ВТ_Остатки.Invoice.DisputeCollectableDate КАК InvoiceDisputeCollectableDate,
	ВТ_Остатки.Invoice.Contract.AmendmentName КАК InvoiceContractAmendmentName,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
			ТОГДА "I"
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Memo
			ТОГДА "Memo"
		ИНАЧЕ ""
	КОНЕЦ КАК TransType,
	СУММА(ВЫБОР
			КОГДА ВТ_ОплатыИзОбмена.Source ЕСТЬ NULL 
				ТОГДА ВТ_ОплатыПоПроводкам.Paid / ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам.Курс * ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам.Кратность
			ИНАЧЕ ВТ_ОплатыИзОбмена.SettlementAmount / ВнутренниеКурсыВалютСрезПоследних.Курс * ВнутренниеКурсыВалютСрезПоследних.Кратность
		КОНЕЦ) КАК Paid,
	МАКСИМУМ(ВЫБОР
			КОГДА ВТ_ОплатыИзОбмена.Source ЕСТЬ NULL 
				ТОГДА ВТ_ОплатыПоПроводкам.PaymentDate
			ИНАЧЕ ВТ_ОплатыИзОбмена.PaymentDate
		КОНЕЦ) КАК PaymentDate,
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1)) = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ЛОЖЬ
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Status, ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)) = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
			ТОГДА ЛОЖЬ
		КОГДА РАЗНОСТЬДАТ(InvoiceCommentsСрезПоследних.Problem.ForecastDate, &amp;ТекущаяДата, ДЕНЬ) &gt; 0
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК BrokenPromises,
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList, "") = ""
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК EscalationSent,
	ВЫБОР
		КОГДА ВТ_Остатки.LegalEntity &lt;&gt; ЗНАЧЕНИЕ(Справочник.LegalEntiites.ПустаяСсылка)
			ТОГДА ВТ_Остатки.LegalEntity
		ИНАЧЕ ВТ_Остатки.Company.DefaultLegalEntity
	КОНЕЦ КАК LegalEntity,
	ВТ_Остатки.Client.CRMID КАК UID,
	ВТ_Остатки.Client.Наименование КАК CustUName
ИЗ
	ВТ_ОстаткиБезОплатТекущегоПериода КАК ВТ_Остатки
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ИерархияКлиентов КАК ВТ_ИерархияКлиентов
		ПО ВТ_Остатки.Client = ВТ_ИерархияКлиентов.Контрагент
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних КАК ВнутренниеКурсыВалютСрезПоследних
		ПО ВТ_Остатки.Currency = ВнутренниеКурсыВалютСрезПоследних.Валюта
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.InvoiceComments.СрезПоследних({(&amp;КонецМесяцаФормированияОтчета)}, ) КАК InvoiceCommentsСрезПоследних
		ПО ВТ_Остатки.Invoice = InvoiceCommentsСрезПоследних.Invoice
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Collectors КАК Collectors
		ПО ВТ_Остатки.Client = Collectors.Client
			И (Collectors.GeoMarket = ВТ_Остатки.Location.БазовыйЭлемент.GeoMarket.Родитель
				ИЛИ Collectors.GeoMarket = ЗНАЧЕНИЕ(Справочник.HFM_Geomarkets.ПустаяСсылка))
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОплатыИзОбмена КАК ВТ_ОплатыИзОбмена
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних КАК ВнутренниеКурсыВалютСрезПоследнихОплатыИзОбмена
			ПО ВТ_ОплатыИзОбмена.Currency = ВнутренниеКурсыВалютСрезПоследнихОплатыИзОбмена.Валюта
		ПО ВТ_Остатки.Company = ВТ_ОплатыИзОбмена.Company
			И ВТ_Остатки.Source = ВТ_ОплатыИзОбмена.Source
			И ВТ_Остатки.Invoice = ВТ_ОплатыИзОбмена.Invoice
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОплатыПоПроводкам КАК ВТ_ОплатыПоПроводкам
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ВнутренниеКурсыВалют.СрезПоследних КАК ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам
			ПО ВТ_ОплатыПоПроводкам.Currency = ВнутренниеКурсыВалютСрезПоследнихОплатыПоПроводкам.Валюта
		ПО ВТ_Остатки.Client = ВТ_ОплатыПоПроводкам.Client
			И ВТ_Остатки.Company = ВТ_ОплатыПоПроводкам.Company
			И ВТ_Остатки.Source = ВТ_ОплатыПоПроводкам.Source
			И ВТ_Остатки.Location = ВТ_ОплатыПоПроводкам.Location
			И ВТ_Остатки.SubSubSegment = ВТ_ОплатыПоПроводкам.SubSubSegment
			И ВТ_Остатки.Invoice = ВТ_ОплатыПоПроводкам.Invoice
			И ВТ_Остатки.AU = ВТ_ОплатыПоПроводкам.AU
ГДЕ
	ВТ_Остатки.Client &lt;&gt; ЗНАЧЕНИЕ(Справочник.Контрагенты.NonTrade)
	И ВТ_Остатки.Client &lt;&gt; ЗНАЧЕНИЕ(Справочник.Контрагенты.Unreconciled)

СГРУППИРОВАТЬ ПО
	ВТ_ИерархияКлиентов.ГоловнойКонтрагент,
	ВТ_Остатки.SubSubSegment,
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice.DueDateTo &lt;= &amp;Период
				И InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)
		ИНАЧЕ InvoiceCommentsСрезПоследних.Problem.Status
	КОНЕЦ,
	InvoiceCommentsСрезПоследних.Problem.ConfirmedBy,
	InvoiceCommentsСрезПоследних.Problem.RemedialWorkPlan,
	InvoiceCommentsСрезПоследних.Problem.Comment,
	InvoiceCommentsСрезПоследних.Problem.CustomerInputDetails,
	ВТ_Остатки.Account,
	InvoiceCommentsСрезПоследних.Problem.SLBAssignedToList,
	InvoiceCommentsСрезПоследних.Problem.RWDTargetDate,
	ВТ_Остатки.ПредставлениеДокумента,
	InvoiceCommentsСрезПоследних.Problem.CustomerRepresentative,
	InvoiceCommentsСрезПоследних.Problem.CustInputDate,
	ВТ_Остатки.Client,
	ВТ_Остатки.Company,
	ВТ_Остатки.Currency,
	ВТ_Остатки.AU,
	ВТ_Остатки.Source,
	ВТ_Остатки.Location,
	Collectors.Collector,
	ВЫБОР
		КОГДА ВТ_Остатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.Radius)
			ТОГДА ВТ_Остатки.Invoice.Agreement
		ИНАЧЕ ВТ_Остатки.Invoice.Contract.crmContractName
	КОНЕЦ,
	ВТ_Остатки.Invoice.ClientID,
	ВТ_Остатки.Invoice.ДатаВозвратаКС,
	ВТ_Остатки.Invoice.ДатаОтправкиКС,
	ВТ_Остатки.Invoice.СтатусВозвратаКС,
	ВТ_Остатки.Invoice.КомментарийСтатусаВозвратаКС,
	ВЫБОР
		КОГДА ВТ_Остатки.Source = ЗНАЧЕНИЕ(Перечисление.ТипыСоответствий.OracleMI)
				И ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
				И ВТ_Остатки.Invoice.FiscalInvoiceNo &lt;&gt; ""
			ТОГДА ВТ_Остатки.Invoice.FiscalInvoiceNo
		ИНАЧЕ ВТ_Остатки.ПредставлениеДокумента
	КОНЕЦ,
	ВТ_Остатки.Invoice.Номер,
	ВТ_Остатки.Invoice.Дата,
	ВТ_Остатки.Invoice.FiscalInvoiceNo,
	ВТ_Остатки.Invoice.FiscalInvoiceDate,
	ВТ_Остатки.Invoice.Contract.Trigger,
	ВТ_Остатки.Invoice.TriggerDate,
	ВТ_Остатки.Invoice.Contract.PTDaysFrom,
	ВТ_Остатки.Invoice.Contract.СрокОплаты,
	ВТ_Остатки.Invoice.DueDateFrom,
	ВТ_Остатки.Invoice.DueDateTo,
	ВТ_Остатки.Invoice.StatusOfDispute,
	ВТ_Остатки.Invoice.DisputeDistributedDate,
	ВТ_Остатки.Invoice.DisputeCollectableDate,
	ВТ_Остатки.Invoice.Contract.AmendmentName,
	ЕСТЬNULL(ВнутренниеКурсыВалютСрезПоследних.Курс, 0),
	ВЫБОР
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Invoice
			ТОГДА "I"
		КОГДА ВТ_Остатки.Invoice ССЫЛКА Документ.Memo
			ТОГДА "Memo"
		ИНАЧЕ ""
	КОНЕЦ,
	ВЫБОР
		КОГДА InvoiceCommentsСрезПоследних.Problem.Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoiceNotDue)
			ТОГДА ВТ_Остатки.Invoice.DueDateTo
		ИНАЧЕ ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1))
	КОНЕЦ,
	ВЫБОР
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.ForecastDate, ДАТАВРЕМЯ(1, 1, 1)) = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ЛОЖЬ
		КОГДА ЕСТЬNULL(InvoiceCommentsСрезПоследних.Problem.Status, ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.ПустаяСсылка)) = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid)
			ТОГДА ЛОЖЬ
		КОГДА РАЗНОСТЬДАТ(InvoiceCommentsСрезПоследних.Problem.ForecastDate, &amp;ТекущаяДата, ДЕНЬ) &gt; 0
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ,
	ВЫБОР
		КОГДА ВТ_Остатки.LegalEntity &lt;&gt; ЗНАЧЕНИЕ(Справочник.LegalEntiites.ПустаяСсылка)
			ТОГДА ВТ_Остатки.LegalEntity
		ИНАЧЕ ВТ_Остатки.Company.DefaultLegalEntity
	КОНЕЦ

ИМЕЮЩИЕ
	СУММА(ВТ_Остатки.AmountОстаток) &lt;&gt; 0</query>
	</dataSet>
	<calculatedField>
		<dataPath>DueFrom</dataPath>
		<expression>ВЫБОР КОГДА InvoiceDueDateFrom &lt;= &amp;Период ТОГДА ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ ИНАЧЕ 0 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Due From</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>USDAmount</dataPath>
		<expression>ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>USD Amount</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>DueTo</dataPath>
		<expression>ВЫБОР КОГДА InvoiceDueDateTo &lt;= &amp;Период ТОГДА ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ ИНАЧЕ 0 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Due To</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>FcstCollect</dataPath>
		<expression>ВЫБОР КОГДА ForecastDate &lt;= &amp;Период И ForecastDate &lt;&gt; ДАТАВРЕМЯ(1,1,1) ТОГДА ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ - ВЫБОР КОГДА Status = ЗНАЧЕНИЕ(Перечисление.InvoiceStatus.InvoicePaid) ТОГДА ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ  ИНАЧЕ 0 КОНЕЦ  ИНАЧЕ 0 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Fcst Collect</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>NoFrcst</dataPath>
		<expression>ВЫБОР КОГДА ForecastDate = ДАТАВРЕМЯ(1,1,1) ТОГДА ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ ИНАЧЕ 0 КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>No Frcst</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>Insolvent</dataPath>
		<expression>Выбор
	Когда Status = Значение(Перечисление.InvoiceStatus.CustomerIsInsolventOrBankrupt)
		Тогда ВЫБОР КОГДА Currency = &amp;Рубль И Rate =0 Тогда 0 КОГДА Currency = &amp;Рубль ТОГДА AmountОстаток / Rate ИНАЧЕ AmountОстаток КОНЕЦ
	Иначе 0
Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Under Litigation</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ЧДЦ=2</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<calculatedField>
		<dataPath>BaseAmountОстатокМодуль</dataPath>
		<expression>Выбор Когда BaseAmountОстаток &gt; 0 Тогда BaseAmountОстаток Иначе -BaseAmountОстаток Конец</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>BaseAmountОстатокМодуль</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<totalField>
		<dataPath>USDAmount</dataPath>
		<expression>Сумма(USDAmount)</expression>
	</totalField>
	<totalField>
		<dataPath>Paid</dataPath>
		<expression>Сумма(Paid)</expression>
	</totalField>
	<totalField>
		<dataPath>FcstCollect</dataPath>
		<expression>Сумма(FcstCollect)</expression>
	</totalField>
	<totalField>
		<dataPath>Insolvent</dataPath>
		<expression>Сумма(Insolvent)</expression>
	</totalField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Period</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<inputParameters>
			<dcscor:item>
				<dcscor:parameter>ФорматРедактирования</dcscor:parameter>
				<dcscor:value xsi:type="xs:string">ДФ=MM/dd/yyyy</dcscor:value>
			</dcscor:item>
		</inputParameters>
	</parameter>
	<parameter>
		<name>Рубль</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Рубль</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>Справочники.Валюты.НайтиПоКоду("643")</expression>
	</parameter>
	<parameter>
		<name>ПериодОстатков</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период остатков</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>НачалоПериода(&amp;Период,"МЕСЯЦ") </expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецДняФормированияОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец дня формирования отчета</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(&amp;Период,"ДЕНЬ")</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ПериодНачалаАнализаОплат</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период начала анализа оплат</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>ТекущаяДата</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущая дата</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(ТекущаяДата(), "ДЕНЬ")</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецМесяцаФормированияОтчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец месяца формирования отчета</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(&amp;Период,"МЕСЯЦ")</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Основной</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:userFields>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле1</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Overdue No Fcst</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Paid - Insolvent
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression/>
					<dcsset:totalExpressionPresentation/>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле2</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>In Range no Coll</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда DueFrom &lt;&gt; 0 И DueTo = 0
		Тогда USDAmount
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueFrom &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Выбор
				Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
					Тогда USDAmount - FcstCollect - Paid - Insolvent
				Иначе 0
			Конец - Paid - Insolvent
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда [Due From] &lt;&gt; 0 И [Due To] = 0
		Тогда [USD Amount]
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due From] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Выбор
				Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
					Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
				Иначе 0
			Конец - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression/>
					<dcsset:totalExpressionPresentation/>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле3</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Not Due</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда DueFrom = 0 И DueTo = 0
		Тогда USDAmount
	Когда ForecastDate = ДатаВремя(1, 1, 1)
		Тогда 0
	Иначе USDAmount - Insolvent - Paid - FcstCollect - Выбор
			Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueFrom &gt; FcstCollect
				Тогда USDAmount - FcstCollect - Выбор
						Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
							Тогда USDAmount - FcstCollect - Paid - Insolvent
						Иначе 0
					Конец - Paid - Insolvent
			Иначе 0
		Конец - Выбор
			Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
				Тогда USDAmount - FcstCollect - Paid - Insolvent
			Иначе 0
		Конец
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда [Due From] = 0 И [Due To] = 0
		Тогда [USD Amount]
	Когда [Forecast date] = ДатаВремя(1, 1, 1)
		Тогда 0
	Иначе [USD Amount] - [Under Litigation] - Paid - [Fcst Collect] - Выбор
			Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due From] &gt; [Fcst Collect]
				Тогда [USD Amount] - [Fcst Collect] - Выбор
						Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
							Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
						Иначе 0
					Конец - Paid - [Under Litigation]
			Иначе 0
		Конец - Выбор
			Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
				Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
			Иначе 0
		Конец
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression/>
					<dcsset:totalExpressionPresentation/>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле4</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Overdue – Dispute</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И InvoiceDueDateFrom &lt;= &amp;Период
		Тогда USDAmount - Paid - FcstCollect
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И [Invoice.Due date from] &lt;= &amp;Period
		Тогда [USD Amount] - Paid - [Fcst Collect]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression/>
					<dcsset:totalExpressionPresentation/>
				</dcsset:item>
			</dcsset:userFields>
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Company.Наименование</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Company</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>LegalEntity</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Source</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Location.БазовыйЭлемент.GeoMarket.Родитель</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Geo Market</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Location.БазовыйЭлемент.GeoMarket</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Sub Geo Market</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>SubSubSegment.БазовыйЭлемент.Родитель.Родитель</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Segment</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ИдентификаторКлиента</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Customer ID</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Client.CRMID</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>CRM ID</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Client</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ГоловнойКонтрагент</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Corporate</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Collector</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Collector</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Account</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>AU</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>TransType</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceНомер</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Invoice No</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceДата</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceFiscalInvoiceNo</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Fiscal invoice number</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceFiscalInvoiceDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Fiscal invoice date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Currency</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Invoice / Transaction Amount</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>InvoiceAmount</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Amount</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Remaining Amount</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>AmountОстаток</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Amount</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>USDAmount</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Rate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Rate</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Agreement</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Agreement</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractAmendmentName</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Additional agreement/Work order</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractTrigger</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Trigger</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceДатаОтправкиКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Departure date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceДатаВозвратаКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Return date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceTriggerDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Trigger date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractPTDaysFrom</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>PT From</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceContractСрокОплаты</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>PT To</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDueDateFrom</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Date From</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDueDateTo</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Date To</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>DueFrom</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>DueTo</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Status</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Status</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ConfirmedBy</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Confirmed By</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ForecastDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Forecast Date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>PaymentDate</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Paid</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>FcstCollect</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПользовательскиеПоля.Поле2</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПользовательскиеПоля.Поле4</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПользовательскиеПоля.Поле1</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПользовательскиеПоля.Поле3</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>NoFrcst</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Insolvent</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Under Litigation</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustInputDate</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustomerRepresentative</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustomerInputDetails</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>SLBAssignedTo</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Assigned To</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RemedialWorkPlan</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>RWDTargetDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>RWD Deadline</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceStatusOfDispute</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Status of dispute</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDisputeDistributedDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Dispute Distributed date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceDisputeCollectableDate</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Dispute Collectable date</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceКомментарийСтатусаВозвратаКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Comment return status</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>InvoiceСтатусВозвратаКС</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>KS Return status</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>BrokenPromises</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>EscalationSent</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Source</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>a775f9fe-a968-47fc-a695-0791acdd4a9f</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">BaseAmountОстатокМодуль</dcsset:left>
					<dcsset:comparisonType>GreaterOrEqual</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:decimal">1</dcsset:right>
					<dcsset:userSettingID>ae204ac2-e755-4e99-8612-94c63e0a17bf</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Remaining USD Amount</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardBeginningDate">
						<v8:variant xsi:type="v8:StandardBeginningDateVariant">BeginningOfNextDay</v8:variant>
					</dcscor:value>
					<dcsset:userSettingID>6a13f980-6f34-4eea-91c0-a7e9314c4df5</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>КонецМесяцаФормированияОтчета</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле1</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле2</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле3</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Формат</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>ЧДЦ=2; ДФ=ДФ=MM/dd/yyyy</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>InvoiceДата</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Формат</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>ДФ=MM/dd/yyyy</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МакетОформления</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">Море</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionAttributesPlacement">Separately</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
	<settingsVariant>
		<dcsset:name>PerformanceDashboard</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Performance Dashboard</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:userFields>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле1</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Overdue</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Paid - Insolvent
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression>Выбор
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Paid - Insolvent
	Иначе 0
Конец</dcsset:totalExpression>
					<dcsset:totalExpressionPresentation>Выбор
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:totalExpressionPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле2</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>In Range No Fcst Coll</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда DueFrom &lt;&gt; 0 И DueTo = 0
		Тогда USDAmount
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueFrom &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Выбор
				Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
					Тогда USDAmount - FcstCollect - Paid - Insolvent
				Иначе 0
			Конец - Paid - Insolvent
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда [Due From] &lt;&gt; 0 И [Due To] = 0
		Тогда [USD Amount]
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due From] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Выбор
				Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
					Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
				Иначе 0
			Конец - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression>Выбор
	Когда DueFrom &lt;&gt; 0 И DueTo = 0
		Тогда USDAmount
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueFrom &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Выбор
				Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
					Тогда USDAmount - FcstCollect - Paid - Insolvent
				Иначе 0
			Конец - Paid - Insolvent
	Иначе 0
Конец</dcsset:totalExpression>
					<dcsset:totalExpressionPresentation>Выбор
	Когда [Due From] &lt;&gt; 0 И [Due To] = 0
		Тогда [USD Amount]
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due From] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Выбор
				Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
					Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
				Иначе 0
			Конец - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:totalExpressionPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле3</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Not Due</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда DueFrom = 0 И DueTo = 0
		Тогда USDAmount
	Когда ForecastDate = ДатаВремя(1, 1, 1)
		Тогда 0
	Иначе USDAmount - Insolvent - Paid - FcstCollect - Выбор
			Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueFrom &gt; FcstCollect
				Тогда USDAmount - FcstCollect - Выбор
						Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
							Тогда USDAmount - FcstCollect - Paid - Insolvent
						Иначе 0
					Конец - Paid - Insolvent
			Иначе 0
		Конец - Выбор
			Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
				Тогда USDAmount - FcstCollect - Paid - Insolvent
			Иначе 0
		Конец
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда [Due From] = 0 И [Due To] = 0
		Тогда [USD Amount]
	Когда [Forecast date] = ДатаВремя(1, 1, 1)
		Тогда 0
	Иначе [USD Amount] - [Under Litigation] - Paid - [Fcst Collect] - Выбор
			Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due From] &gt; [Fcst Collect]
				Тогда [USD Amount] - [Fcst Collect] - Выбор
						Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
							Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
						Иначе 0
					Конец - Paid - [Under Litigation]
			Иначе 0
		Конец - Выбор
			Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
				Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
			Иначе 0
		Конец
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression>Выбор
	Когда DueFrom = 0 И DueTo = 0
		Тогда USDAmount
	Когда ForecastDate = ДатаВремя(1, 1, 1)
		Тогда 0
	Иначе USDAmount - Insolvent - Paid - FcstCollect - Выбор
			Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueFrom &gt; FcstCollect
				Тогда USDAmount - FcstCollect - Выбор
						Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
							Тогда USDAmount - FcstCollect - Paid - Insolvent
						Иначе 0
					Конец - Paid - Insolvent
			Иначе 0
		Конец - Выбор
			Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
				Тогда USDAmount - FcstCollect - Paid - Insolvent
			Иначе 0
		Конец
Конец</dcsset:totalExpression>
					<dcsset:totalExpressionPresentation>Выбор
	Когда [Due From] = 0 И [Due To] = 0
		Тогда [USD Amount]
	Когда [Forecast date] = ДатаВремя(1, 1, 1)
		Тогда 0
	Иначе [USD Amount] - [Under Litigation] - Paid - [Fcst Collect] - Выбор
			Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due From] &gt; [Fcst Collect]
				Тогда [USD Amount] - [Fcst Collect] - Выбор
						Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
							Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
						Иначе 0
					Конец - Paid - [Under Litigation]
			Иначе 0
		Конец - Выбор
			Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
				Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
			Иначе 0
		Конец
Конец</dcsset:totalExpressionPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле4</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Overdue Disputed</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И InvoiceDueDateFrom &lt;= &amp;Период
		Тогда USDAmount - Paid - FcstCollect
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И [Invoice.Due date from] &lt;= &amp;Period
		Тогда [USD Amount] - Paid - [Fcst Collect]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И InvoiceDueDateFrom &lt;= &amp;Период
		Тогда USDAmount - Paid - FcstCollect
	Иначе 0
Конец</dcsset:totalExpression>
					<dcsset:totalExpressionPresentation>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И [Invoice.Due date from] &lt;= &amp;Period
		Тогда [USD Amount] - Paid - [Fcst Collect]
	Иначе 0
Конец</dcsset:totalExpressionPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:UserFieldExpression">
					<dcsset:dataPath>ПользовательскиеПоля.Поле5</dcsset:dataPath>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Overdue Not Forecasted</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:detailExpression>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И InvoiceDueDateFrom &lt;= &amp;Период
		Тогда USDAmount - Paid - FcstCollect
	Иначе 0
Конец + Выбор
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Paid - Insolvent
	Иначе 0
Конец</dcsset:detailExpression>
					<dcsset:detailExpressionPresentation>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И [Invoice.Due date from] &lt;= &amp;Period
		Тогда [USD Amount] - Paid - [Fcst Collect]
	Иначе 0
Конец + Выбор
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:detailExpressionPresentation>
					<dcsset:totalExpression>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И InvoiceDueDateFrom &lt;= &amp;Период
		Тогда USDAmount - Paid - FcstCollect
	Иначе 0
Конец + Выбор
	Когда ForecastDate &lt;&gt; ДатаВремя(1, 1, 1) И DueTo &gt; FcstCollect
		Тогда USDAmount - FcstCollect - Paid - Insolvent
	Иначе 0
Конец</dcsset:totalExpression>
					<dcsset:totalExpressionPresentation>Выбор
	Когда (Status = Значение(Перечисление.InvoiceStatus.PendingSLBDocumentation) Или Status = Значение(Перечисление.InvoiceStatus.Pricing) Или Status = Значение(Перечисление.InvoiceStatus.TechnicalSQ) Или Status = Значение(Перечисление.InvoiceStatus.LostInHole)) И [Invoice.Due date from] &lt;= &amp;Period
		Тогда [USD Amount] - Paid - [Fcst Collect]
	Иначе 0
Конец + Выбор
	Когда [Forecast date] &lt;&gt; ДатаВремя(1, 1, 1) И [Due To] &gt; [Fcst Collect]
		Тогда [USD Amount] - [Fcst Collect] - Paid - [Under Litigation]
	Иначе 0
Конец</dcsset:totalExpressionPresentation>
				</dcsset:item>
			</dcsset:userFields>
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>CustUName</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Paid</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>FcstCollect</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Forecasted Collections</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemFolder">
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>  </v8:content>
							</v8:item>
						</dcsset:lwsTitle>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ПользовательскиеПоля.Поле1</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ПользовательскиеПоля.Поле4</dcsset:field>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:SelectedItemField">
							<dcsset:field>ПользовательскиеПоля.Поле5</dcsset:field>
						</dcsset:item>
						<dcsset:placement>Horizontally</dcsset:placement>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПользовательскиеПоля.Поле2</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПользовательскиеПоля.Поле3</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>Insolvent</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>Under Litigation</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>USDAmount</dcsset:field>
						<dcsset:lwsTitle>
							<v8:item>
								<v8:lang>ru</v8:lang>
								<v8:content>AR Billed Balance</v8:content>
							</v8:item>
						</dcsset:lwsTitle>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">ГоловнойКонтрагент</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Контрагенты.NonTrade</dcsset:right>
					<dcsset:userSettingID>4a89347b-af7d-44db-9f28-8e3e0dc103d8</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Corporate</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">SubSubSegment.БазовыйЭлемент.Родитель.Родитель</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.HFM_Technology.ПустаяСсылка</dcsset:right>
					<dcsset:userSettingID>a6551a64-859c-44b1-a8ac-69d180d38a57</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Segment</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardBeginningDate">
						<v8:variant xsi:type="v8:StandardBeginningDateVariant">BeginningOfNextDay</v8:variant>
					</dcscor:value>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле1</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле2</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле3</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле4</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>ПользовательскиеПоля.Поле5</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Формат</dcscor:parameter>
							<dcscor:value xsi:type="v8:LocalStringType">
								<v8:item>
									<v8:lang>ru</v8:lang>
									<v8:content>ЧДЦ=2</v8:content>
								</v8:item>
							</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МакетОформления</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">Море</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionAttributesPlacement">Separately</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>UID</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>CustUName</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>